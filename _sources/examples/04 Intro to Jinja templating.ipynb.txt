{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Using capellambse with Jinja2\n",
    "\n",
    "Welcome to the py-capellambse jinja2 templating showcase. When using capella\n",
    "for systems engineering you might want to generate documentation for your model\n",
    "you can use M2DOC, one of capella's [addons] which we found too challenging or\n",
    "you can use Jinja2 a richful templating language with high degree of freedom.\n",
    "\n",
    "This notebook will introduce you into writing jinja2 templates where you'll plant model\n",
    "information and diagrams. Additonally we'll give a side-note on how to handle\n",
    "unique identifiers professionally with PVMT and some hints onto how to use jinja\n",
    "in a professional manner which could give you the option onto developping an\n",
    "automated document generation system.\n",
    "\n",
    "With Jinja2 you are able to generate any text-based format(HTML, XML, CSV, LaTex,...)\n",
    "but during this tutorial we will only generate .html files. The jinja2 syntax is\n",
    "inspired by python. Check out their [docs]!\n",
    "\n",
    "[docs]: https://jinja2docs.readthedocs.io/en/stable/\n",
    "[addons]: https://www.eclipse.org/capella/addons.html\n",
    "\n",
    "Below code loads the needed libraries and instantiates a test model:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import jinja2\n",
    "from IPython.core.display import HTML\n",
    "\n",
    "import capellambse\n",
    "\n",
    "path_to_model = \"../../../tests/data/models/test7_0/Model Test 7.0.aird\"\n",
    "model = capellambse.MelodyModel(path_to_model)\n",
    "env = jinja2.Environment()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In the following we want to make a template to document all modelled actors from\n",
    "the logical layer. Therefore we define a template string where we iterate over\n",
    "all actors and plant the name, uuid and description into it.\n",
    "\n",
    "*Hint: Make sure that you know of capella's [metamodel] as we are implementing the\n",
    "capellambse.layers as close as possible to it while being as efficient and pythonic\n",
    "we can be currently. This knowledge can shorten used statements in the template immensely!*\n",
    "\n",
    "[metamodel]: https://dbinfrago.github.io/py-capellambse/start/intro-to-api.html"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<h1>Actor definitions</h1>\n",
       "\n",
       "    <h2>Prof. A. P. W. B. Dumbledore</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p>UUID: 08e02248-504d-4ed8-a295-c7682a614f66</p>\n",
       "    <p><p>Principal of Hogwarts, wearer of the elder wand and greatest mage of all time.</p>\n",
       "</p>\n",
       "\n",
       "    <h2>Prof. S. Snape</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p>UUID: 6f463eed-c77b-4568-8078-beec0536f243</p>\n",
       "    <p><p>Good guy and teacher of brewing arts.</p>\n",
       "</p>\n",
       "\n",
       "    <h2>Harry J. Potter</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p>UUID: a8c46457-a702-41c4-a971-c815c4c5a674</p>\n",
       "    <p></p>\n",
       "\n",
       "    <h2>R. Weasley</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p>UUID: ff7b8672-84db-4b93-9fea-22a410907fb1</p>\n",
       "    <p></p>\n",
       "\n",
       "    <h2>Voldemort</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p>UUID: 3e0ee19f-0e3f-49d4-ae99-29bd4a3260c5</p>\n",
       "    <p></p>\n",
       "\n",
       "    <h2>Multiport</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p>UUID: b3888dad-a870-4b8b-97d4-0ddb83ef9251</p>\n",
       "    <p></p>\n"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "templ = \"\"\"\n",
    "<h1>Actor definitions</h1>\n",
    "{% for actor in model.la.all_components.by_is_actor(True) %}\n",
    "    <h2>{{ actor.name }}</h2>\n",
    "    <h3>Actor definition</h3>\n",
    "    <p>UUID: {{ actor.uuid }}</p>\n",
    "    <p>{{ actor.description }}</p>\n",
    "{% endfor %}\n",
    "\"\"\"\n",
    "\n",
    "HTML(env.from_string(templ).render(model=model))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "As an extra: We don't use the UUID from capella in our documents. If you still\n",
    "need an identifier, in the following it's explained how we are doing it:\n",
    "\n",
    "With the capella PVMT, one of the various capella addons, you can make property\n",
    "value groups and then set arbitrary values with these. Capellambse is able to recognize\n",
    "the pvmt extension and gives read and write access. In our workflows we are maintaining\n",
    "an ID database for all model elements. If that is done you can access pvmt attributes\n",
    "like:\n",
    "\n",
    "```html\n",
    "{{ ... }}\n",
    "<p>ID: {{ actor.pvmt[\"Group.Identification.MY MODEL ID\"] }}</p>\n",
    "{{ ... }}\n",
    "```\n",
    "\n",
    "For a PVMT showcase look into [TODO: pvmt-showcase notebook]."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Filters and object manipulation\n",
    "\n",
    "Now to step up our templating-game, we'll bring in more complexity.\n",
    "We want a template that documents functional context of all actors. For that\n",
    "iff the actor has a non-empty functions attribute we make a table with columns\n",
    "for function's uid, name, description and `FunctionalExchange`s.\n",
    "\n",
    "We can define variables in the template via the set statement. Furthermore\n",
    "the builtin jinja [filters] already give much power for object manipulation during\n",
    "rendering. Here we use map(.) to create `FunctionalExchange` iterators and sum these\n",
    "up into one large list that stores all `FunctionalExchange`s that have an an actor\n",
    "as either source or target. In the table for-loop we then filter on this lookup\n",
    "container and set outgoing and incoming `FunctionalExchange`s that we need for\n",
    "the last column.\n",
    "\n",
    "The jupyter environment is great for writing templates b/c you can investigate\n",
    "possible attributes of objects right away in another cell.\n",
    "\n",
    "*Hint: You can define custom filter-functions and add them to the Environment.filters.*\n",
    "\n",
    "[filters]: https://jinja.palletsprojects.com/en/3.0.x/templates/#builtin-filters"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<h1>Actor definitions</h1>\n",
       "\n",
       "\n",
       "    <h2>Prof. A. P. W. B. Dumbledore</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p><p>Principal of Hogwarts, wearer of the elder wand and greatest mage of all time.</p>\n",
       "</p>\n",
       "    <h3>Actor functions</h3>\n",
       "    \n",
       "    \n",
       "        <p>The table below identifies functions of Prof. A. P. W. B. Dumbledore.</p>\n",
       "        <table>\n",
       "            <thead>\n",
       "                <tr>\n",
       "                    <th>ID</th>\n",
       "                    <th>Function</th>\n",
       "                    <th>Description</th>\n",
       "                    <th>Involved Subsystems</th>\n",
       "                </tr>\n",
       "            </thead>\n",
       "            <tbody>\n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>f708bc29-d69f-42a0-90cc-11fc01054cd0</td>\n",
       "        <td>manage the school</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>beaf5ba4-8fa9-4342-911f-0266bb29be45</td>\n",
       "        <td>advise Harry</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "            </tbody>\n",
       "        </table>\n",
       "        <p style=\"margin-left: 1cm; font-weight: bold; font-style: italic;\">Functions of Prof. A. P. W. B. Dumbledore</p>\n",
       "    \n",
       "    \n",
       "\n",
       "    <h2>Prof. S. Snape</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p><p>Good guy and teacher of brewing arts.</p>\n",
       "</p>\n",
       "    <h3>Actor functions</h3>\n",
       "    \n",
       "    \n",
       "        <p>The table below identifies functions of Prof. S. Snape.</p>\n",
       "        <table>\n",
       "            <thead>\n",
       "                <tr>\n",
       "                    <th>ID</th>\n",
       "                    <th>Function</th>\n",
       "                    <th>Description</th>\n",
       "                    <th>Involved Subsystems</th>\n",
       "                </tr>\n",
       "            </thead>\n",
       "            <tbody>\n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>a7acb298-d14b-4707-a419-fea272434541</td>\n",
       "        <td>Teaching</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>4a2a7f3c-d223-4d44-94a7-50dd2906a70c</td>\n",
       "        <td>maintain a layer of defense for the Sorcerer's Stone</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "            </tbody>\n",
       "        </table>\n",
       "        <p style=\"margin-left: 1cm; font-weight: bold; font-style: italic;\">Functions of Prof. S. Snape</p>\n",
       "    \n",
       "    \n",
       "\n",
       "    <h2>Harry J. Potter</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p></p>\n",
       "    <h3>Actor functions</h3>\n",
       "    \n",
       "    \n",
       "        <p>The table below identifies functions of Harry J. Potter.</p>\n",
       "        <table>\n",
       "            <thead>\n",
       "                <tr>\n",
       "                    <th>ID</th>\n",
       "                    <th>Function</th>\n",
       "                    <th>Description</th>\n",
       "                    <th>Involved Subsystems</th>\n",
       "                </tr>\n",
       "            </thead>\n",
       "            <tbody>\n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>aa9931e3-116c-461e-8215-6b9fdbdd4a1b</td>\n",
       "        <td>kill He Who Must Not Be Named</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "            </tbody>\n",
       "        </table>\n",
       "        <p style=\"margin-left: 1cm; font-weight: bold; font-style: italic;\">Functions of Harry J. Potter</p>\n",
       "    \n",
       "    \n",
       "\n",
       "    <h2>R. Weasley</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p></p>\n",
       "    <h3>Actor functions</h3>\n",
       "    \n",
       "    \n",
       "        <p>The table below identifies functions of R. Weasley.</p>\n",
       "        <table>\n",
       "            <thead>\n",
       "                <tr>\n",
       "                    <th>ID</th>\n",
       "                    <th>Function</th>\n",
       "                    <th>Description</th>\n",
       "                    <th>Involved Subsystems</th>\n",
       "                </tr>\n",
       "            </thead>\n",
       "            <tbody>\n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>c1a42acc-1f53-42bb-8404-77a5c08c414b</td>\n",
       "        <td>assist Harry</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>edbd1ad4-31c0-4d53-b856-3ffa60e0e99b</td>\n",
       "        <td>break school rules</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "            </tbody>\n",
       "        </table>\n",
       "        <p style=\"margin-left: 1cm; font-weight: bold; font-style: italic;\">Functions of R. Weasley</p>\n",
       "    \n",
       "    \n",
       "\n",
       "    <h2>Voldemort</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p></p>\n",
       "    <h3>Actor functions</h3>\n",
       "    \n",
       "        <p style=\"text-align: left;\">No actor functions were identified.</p>\n",
       "    \n",
       "\n",
       "    <h2>Multiport</h2>\n",
       "    <h3>Actor definition</h3>\n",
       "    <p></p>\n",
       "    <h3>Actor functions</h3>\n",
       "    \n",
       "    \n",
       "        <p>The table below identifies functions of Multiport.</p>\n",
       "        <table>\n",
       "            <thead>\n",
       "                <tr>\n",
       "                    <th>ID</th>\n",
       "                    <th>Function</th>\n",
       "                    <th>Description</th>\n",
       "                    <th>Involved Subsystems</th>\n",
       "                </tr>\n",
       "            </thead>\n",
       "            <tbody>\n",
       "    \n",
       "\n",
       "    \n",
       "    \n",
       "    \n",
       "    <tr>\n",
       "        <td>9c1885f5-fac7-48fd-9d54-a11092508867</td>\n",
       "        <td>LAF 1</td>\n",
       "        <td></td>\n",
       "        <td></td>\n",
       "    </tr>\n",
       "\n",
       "    \n",
       "            </tbody>\n",
       "        </table>\n",
       "        <p style=\"margin-left: 1cm; font-weight: bold; font-style: italic;\">Functions of Multiport</p>\n",
       "    \n",
       "    \n"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "templ1 = \"\"\"\n",
    "<h1>Actor definitions</h1>\n",
    "{% set fexs = model.la.all_actor_exchanges.map(\"func_exchanges\") %}\n",
    "{% for actor in model.la.all_actors %}\n",
    "    <h2>{{ actor.name }}</h2>\n",
    "    <h3>Actor definition</h3>\n",
    "    <p>{{ actor.description }}</p>\n",
    "    <h3>Actor functions</h3>\n",
    "    {% for fnc in actor.allocated_functions %}\n",
    "    {% if loop.first %}\n",
    "        <p>The table below identifies functions of {{ actor.name }}.</p>\n",
    "        <table>\n",
    "            <thead>\n",
    "                <tr>\n",
    "                    <th>ID</th>\n",
    "                    <th>Function</th>\n",
    "                    <th>Description</th>\n",
    "                    <th>Involved Subsystems</th>\n",
    "                </tr>\n",
    "            </thead>\n",
    "            <tbody>\n",
    "    {% endif %}\n",
    "\n",
    "    {% set outs = fexs.by_source.owner(fnc) %}\n",
    "    {% set ins = fexs.by_target.owner(fnc) %}\n",
    "    {% set subs = (ins + outs) | map(attribute=\"owner.name\") | unique | sort %}\n",
    "    <tr>\n",
    "        <td>{{ fnc.uuid }}</td>\n",
    "        <td>{{ fnc.name }}</td>\n",
    "        <td>{{ fnc.description }}</td>\n",
    "        <td>{{ subs | join(', ') }}</td>\n",
    "    </tr>\n",
    "\n",
    "    {% if loop.last %}\n",
    "            </tbody>\n",
    "        </table>\n",
    "        <p style=\"margin-left: 1cm; font-weight: bold; font-style: italic;\">Functions of {{ actor.name }}</p>\n",
    "    {% endif %}\n",
    "    {% else %}\n",
    "        <p style=\"text-align: left;\">No actor functions were identified.</p>\n",
    "    {% endfor %}\n",
    "{% endfor %}\n",
    "\"\"\"\n",
    "HTML(env.from_string(templ1).render(model=model))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Beautiful SVG diagrams\n",
    "\n",
    "Finally we will render a template that displays a diagram. There are many ways\n",
    "to do this and with jinja2 you have full control. We like our figures inside\n",
    "tables such that a caption can be displayed"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<h2>Hogwarts</h2>\n",
       "<p>This instance is the mighty Hogwarts. Do you really need a description? Then maybe read the books or watch atleast the epic movies.</p>\n",
       "\n",
       "<table>\n",
       "    <caption>Figure 1: [LAB] Wizard Education</caption>\n",
       "    <tr><td><svg baseProfile=\"full\" class=\"LogicalArchitectureBlank\" font-family=\"'Open Sans','Segoe UI',Arial,sans-serif\" font-size=\"10px\" height=\"611\" shape-rendering=\"geometricPrecision\" version=\"1.1\" viewBox=\"15 15 1162 611\" width=\"1162\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:ev=\"http://www.w3.org/2001/xml-events\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><symbol id=\"LogicalComponentSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><path d=\"M18 237h46v43H18z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 247h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 261h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><g transform=\"scale(0.90705135,1.1024734)\"><path d=\"m 37.427456,20.821353 h 4.221475 V 50.90971 H 37.427456 Z M 39.538194,46.89517 H 56.75519 v 4.01454 H 39.538194 Z\" fill=\"#000\" stroke-width=\"0.1\" /></g></symbol><linearGradient id=\"CustomGradient_C3E6FF_96B1DA\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#C3E6FF\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#96B1DA\" stop-opacity=\"1\" /></linearGradient><symbol id=\"LogicalFunctionSymbol\" viewBox=\"0 0 79 79\"><linearGradient id=\"LF_green\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\"><stop offset=\"0.0\" stop-color=\"#6CB35B\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#ffffff\" stop-opacity=\"1\" /></linearGradient><ellipse cx=\"39.5\" cy=\"39.5\" fill=\"url(#LF_green)\" rx=\"26\" ry=\"21\" stroke=\"#000\" stroke-width=\"2\" /><text fill=\"#000\" font-family=\"'Open Sans','Segoe UI',Arial,sans-serif\" font-size=\"25px\" font-weight=\"bold\" stroke=\"none\" text-anchor=\"middle\" x=\"40\" y=\"50\">LF</text></symbol><symbol id=\"PortSymbol\" viewBox=\"0 0 10 10\"><path d=\"M0 0h10v10H0z\" /><path d=\"M5 1L1 9h8z\" fill=\"#fff\" /></symbol><linearGradient id=\"CustomGradient_EF2929_FFFFFF\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#EF2929\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#FFFFFF\" stop-opacity=\"1\" /></linearGradient><symbol id=\"ComponentPortSymbol\" viewBox=\"0 0 10 10\"><path d=\"M0 0h10v10H0z\" /><path d=\"M 2,2 5,7 8,2\" /></symbol><symbol id=\"LogicalHumanComponentSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><path d=\"M18 237h46v43H18z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 247h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 261h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><use transform=\"matrix(0.62,0,0,0.62,23.82,16.51)\" xlink:href=\"#StickFigureSymbol\" /></symbol><symbol id=\"StickFigureSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"362.861 210.892 75 75\"><g stroke=\"#000\" stroke-width=\"2.4944\" transform=\"matrix(1.0611338,0,0,1.0611338,-24.47665,-12.241673)\"><line fill=\"none\" x1=\"400.362\" x2=\"400.362\" y1=\"232.586\" y2=\"257.534\" /><line fill=\"none\" x1=\"400.83401\" x2=\"388.423\" y1=\"254.299\" y2=\"275.009\" /><line fill=\"none\" x1=\"400.25201\" x2=\"413.97\" y1=\"254.46001\" y2=\"274.987\" /><line fill=\"none\" x1=\"385.634\" x2=\"415.703\" y1=\"244.569\" y2=\"244.49699\" /><ellipse cx=\"400.53201\" cy=\"223.35899\" fill=\"none\" rx=\"9.2180004\" ry=\"8.5080004\" /></g></symbol><symbol id=\"LogicalHumanActorSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><use transform=\"matrix(0.81762456,0,0,0.81762456,-2.5207584,0.47091696)\" xlink:href=\"#StickFigureSymbol\" /></symbol><linearGradient id=\"CustomGradient_DAFDFF_C6E6FF\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#DAFDFF\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#C6E6FF\" stop-opacity=\"1\" /></linearGradient><symbol id=\"LogicalActorSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><path d=\"M18 237h46v43H18z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 247h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 261h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><g fill=\"#000\" stroke-width=\"0.1\" transform=\"scale(0.83010896,1.2046611)\"><path d=\"m 31.063676,19.942628 h 3.754427 v 26.759494 h -3.754427 z m 1.877213,23.189107 h 15.312173 v 3.570387 H 32.940889 Z\" /><path d=\"m 60.32612,19.942628 h 3.202306 l 9.864572,26.759494 H 69.344107 L 61.927273,25.114167 54.51044,46.702122 H 50.461548 Z M 55.007349,37.260842 H 69.08645 v 3.570387 H 55.007349 Z\" /></g></symbol><symbol id=\"FunctionalExchangeSymbol\" viewBox=\"0 0 40 30\"><linearGradient id=\"FunctionalExchangeSymbol-gradient\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#4F7C45\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#BCDDB4\" stop-opacity=\"1\" /></linearGradient><linearGradient id=\"FunctionalExchangeSymbol-gradientreverse\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#BCDDB4\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#4F7C45\" stop-opacity=\"1\" /></linearGradient><g stroke=\"#000\" stroke-width=\"2\"><path d=\"M 36.190065,5.0377724 V 24.962228 H 26.17482 V 5.0377724 Z\" fill=\"url(#FunctionalExchangeSymbol-gradientreverse)\" /><path d=\"m 14.372107,10 h 12.622435 c 0.926189,0.585267 1.836022,1.274509 2.268178,5 -0.208657,2.812473 -0.954601,4.503809 -2.273297,5 H 14.296948\" fill=\"#61c34c\" /><path d=\"M 3.9464908,5.0048246 V 24.995175 H 10.87518 C 12.433713,24.159139 15.158267,20.291241 15.313795,15 15.498614,11.583142 14.059659,6.6240913 10.87518,5.0048246 c -2.2179509,0 -4.5908341,0 -6.9286892,0 z\" fill=\"url(#FunctionalExchangeSymbol-gradient)\" /></g></symbol><symbol id=\"ComponentExchangeSymbol\" viewBox=\"0 0 40 30\"><linearGradient id=\"ComponentExchangeSymbol-gradient\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#8FA5B6\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#E0E9F3\" stop-opacity=\"1\" /></linearGradient><linearGradient id=\"ComponentExchangeSymbol-gradientreverse\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#E0E9F3\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#8FA5B6\" stop-opacity=\"1\" /></linearGradient><g stroke=\"#000\" stroke-width=\"2\"><path d=\"M 36.190065,5.0377724 V 24.962228 H 26.17482 V 5.0377724 Z\" fill=\"url(#ComponentExchangeSymbol-gradientreverse)\" /><path d=\"m 14.372107,10 h 12.622435 c 0.926189,0.585267 1.836022,1.274509 2.268178,5 -0.208657,2.812473 -0.954601,4.503809 -2.273297,5 H 14.296948\" fill=\"#A3BCD0\" /><path d=\"M 3.9464908,5.0048246 V 24.995175 H 10.87518 C 12.433713,24.159139 15.158267,20.291241 15.313795,15 15.498614,11.583142 14.059659,6.6240913 10.87518,5.0048246 c -2.2179509,0 -4.5908341,0 -6.9286892,0 z\" fill=\"url(#ComponentExchangeSymbol-gradient)\" /></g></symbol></defs><rect fill=\"#fff\" height=\"611\" stroke=\"none\" width=\"1162\" x=\"15\" y=\"15\" /><g class=\"Box LogicalComponent context-_E2dKmkhREeyVkeSUJyVgbw context-_IXg70OQUEe2jpIKbeHI0hw context-_WV0_wLB_EeqLtsTDMgEHBw context-_WbdGoLB_EeqLtsTDMgEHBw context-_XNJpULB_EeqLtsTDMgEHBw context-_XNOh0LB_EeqLtsTDMgEHBw context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_dqPI4LB8EeqLtsTDMgEHBw\"><rect class=\"LogicalComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"591\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"411\" x=\"355.5\" y=\"25.5\" /><text class=\"LogicalComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"355\" y=\"25\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"35.85714285714286\">Hogwarts</tspan></text><use height=\"20\" width=\"20\" x=\"529.5\" xlink:href=\"#LogicalComponentSymbol\" y=\"25.85714285714286\" /></g><g class=\"Box LogicalFunction context-_E2dKmkhREeyVkeSUJyVgbw context-_PEjUUMEDEeqW8_YksX3uDg context-_PEmXoMEDEeqW8_YksX3uDg context-_RmRSwMTrEeqlbN5fRfdrWQ context-_che_8MTnEeqlbN5fRfdrWQ context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_GHiygMECEeqW8_YksX3uDg\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"131\" x=\"385.5\" y=\"514.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"385\" y=\"523.2857142857143\"><tspan x=\"461.0\" xml:space=\"preserve\" y=\"532.1428571428572\">produce Great</tspan><tspan x=\"461.0\" xml:space=\"preserve\" y=\"547.8571428571429\">Wizards</tspan></text><use height=\"20\" width=\"20\" x=\"408.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"527.8571428571429\" /></g><g class=\"Box FOP context-_PEmXoMEDEeqW8_YksX3uDg\" id=\"_PEjUUMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 513.5 540.5)\" width=\"10\" x=\"508.5\" xlink:href=\"#PortSymbol\" y=\"535.5\" /></g><g class=\"Box FIP context-_E2dKmkhREeyVkeSUJyVgbw context-_RmRSwMTrEeqlbN5fRfdrWQ context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_che_8MTnEeqlbN5fRfdrWQ\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 388.5 540.5)\" width=\"10\" x=\"383.5\" xlink:href=\"#PortSymbol\" y=\"535.5\" /></g><g class=\"Box LogicalFunction context-_PElJgcEDEeqW8_YksX3uDg context-_PEmXoMEDEeqW8_YksX3uDg\" id=\"_IrIUIMEDEeqW8_YksX3uDg\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"110\" x=\"615.5\" y=\"514.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"615\" y=\"507.57142857142856\"><tspan x=\"680.5\" xml:space=\"preserve\" y=\"516.4285714285714\">protect</tspan><tspan x=\"680.5\" xml:space=\"preserve\" y=\"532.1428571428571\">Students</tspan><tspan x=\"680.5\" xml:space=\"preserve\" y=\"547.8571428571428\">against the...</tspan></text><use height=\"20\" width=\"20\" x=\"631.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"523.5714285714286\" /></g><g class=\"Box FIP context-_PEmXoMEDEeqW8_YksX3uDg\" id=\"_PElJgcEDEeqW8_YksX3uDg\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 618.5 540.5)\" width=\"10\" x=\"613.5\" xlink:href=\"#PortSymbol\" y=\"535.5\" /></g><g class=\"Box LogicalComponent\" id=\"_8EyHIMZyEeqlbN5fRfdrWQ\"><rect class=\"LogicalComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"421\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"231\" x=\"445.5\" y=\"64.5\" /><text class=\"LogicalComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"445\" y=\"64\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"74.85714285714286\">Campus</tspan></text><use height=\"20\" width=\"20\" x=\"533.0\" xlink:href=\"#LogicalComponentSymbol\" y=\"64.85714285714286\" /></g><g class=\"Box LogicalComponent context-_B6BbcKjsEeu7PunlgwoBGA context-_HDIA8MTnEeqlbN5fRfdrWQ context-_e8OmYKjsEeu7PunlgwoBGA context-_z-LwYMTmEeqlbN5fRfdrWQ context-_z8ZnsMTmEeqlbN5fRfdrWQ\" id=\"_parwwLB_EeqLtsTDMgEHBw\"><rect class=\"LogicalComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"94\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"191\" x=\"465.5\" y=\"90.5\" /><text class=\"LogicalComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"465\" y=\"90\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"98.71428571428572\">School</tspan></text><use height=\"20\" width=\"20\" x=\"536.5\" xlink:href=\"#LogicalComponentSymbol\" y=\"88.71428571428572\" /></g><g class=\"Box LogicalFunction context-_0nQlwMTqEeqlbN5fRfdrWQ context-_FxI0oMTnEeqlbN5fRfdrWQ context-_HDIA8MTnEeqlbN5fRfdrWQ context-_IXOn4uQUEe2jpIKbeHI0hw context-_IXQdEeQUEe2jpIKbeHI0hw context-_IXbcMuQUEe2jpIKbeHI0hw context-_IXg70OQUEe2jpIKbeHI0hw\" id=\"_ilRGMLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"31\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"141\" x=\"489.5\" y=\"132.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"489\" y=\"141.78571428571428\"><tspan x=\"570.0\" xml:space=\"preserve\" y=\"148.5\">educate Wizards</tspan></text><use height=\"20\" width=\"20\" x=\"512.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"138.5\" /></g><g class=\"Box FOP context-_0nQlwMTqEeqlbN5fRfdrWQ context-_HDIA8MTnEeqlbN5fRfdrWQ\" id=\"_FxI0oMTnEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 627.5 148.5)\" width=\"10\" x=\"622.5\" xlink:href=\"#PortSymbol\" y=\"143.5\" /></g><g class=\"Box FIP context-_IXbcMuQUEe2jpIKbeHI0hw context-_IXg70OQUEe2jpIKbeHI0hw\" id=\"_IXOn4uQUEe2jpIKbeHI0hw\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 492.5 138.5)\" width=\"10\" x=\"487.5\" xlink:href=\"#PortSymbol\" y=\"133.5\" /></g><g class=\"Box FOP\" id=\"_IXQdEeQUEe2jpIKbeHI0hw\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(270 492.5 149.5)\" width=\"10\" x=\"487.5\" xlink:href=\"#PortSymbol\" y=\"144.5\" /></g><g class=\"Box CP_UNSET context-_HDIA8MTnEeqlbN5fRfdrWQ context-_z-LwYMTmEeqlbN5fRfdrWQ\" id=\"_z8ZnsMTmEeqlbN5fRfdrWQ\"><rect class=\"CP_UNSET\" fill=\"url(&quot;#CustomGradient_EF2929_FFFFFF&quot;)\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 653.5 119.5)\" width=\"10\" x=\"648.5\" y=\"114.5\" /></g><g class=\"Box CP_OUT context-_e8OmYKjsEeu7PunlgwoBGA\" id=\"_B6BbcKjsEeu7PunlgwoBGA\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(0 561.5 181.5)\" width=\"10\" x=\"556.5\" xlink:href=\"#ComponentPortSymbol\" y=\"176.5\" /></g><g class=\"Box LogicalHumanComponent context-_3Khk4LB_EeqLtsTDMgEHBw context-_3Ko5oLB_EeqLtsTDMgEHBw context-_B6D3sKjsEeu7PunlgwoBGA context-_b-Xr8UhSEeyVkeSUJyVgbw context-_e8OmYKjsEeu7PunlgwoBGA context-_fZ8zcUybEeyns9TdzUL1Ow context-_faMrEkybEeyns9TdzUL1Ow\" id=\"_BkQ1ULB_EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"104\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"191\" x=\"465.5\" y=\"360.5\" /><text class=\"LogicalHumanComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"465\" y=\"360\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"370.85714285714283\">Whomping Willow</tspan></text><use height=\"20\" width=\"20\" x=\"510.0\" xlink:href=\"#LogicalHumanComponentSymbol\" y=\"360.85714285714283\" /></g><g class=\"Box LogicalFunction context-_TLfg8MTnEeqlbN5fRfdrWQ context-_b-Xr8UhSEeyVkeSUJyVgbw context-_faMrEkybEeyns9TdzUL1Ow context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_otKRgLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"51\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"141\" x=\"485.5\" y=\"392.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"485\" y=\"393.92857142857144\"><tspan x=\"566.0\" xml:space=\"preserve\" y=\"402.7857142857143\">defend the</tspan><tspan x=\"566.0\" xml:space=\"preserve\" y=\"418.5\">surrounding area</tspan><tspan x=\"566.0\" xml:space=\"preserve\" y=\"434.2142857142857\">against Intruders</tspan></text><use height=\"20\" width=\"20\" x=\"506.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"409.92857142857144\" /></g><g class=\"Box FOP context-_b-Xr8UhSEeyVkeSUJyVgbw context-_faMrEkybEeyns9TdzUL1Ow context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_TLfg8MTnEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 623.5 418.5)\" width=\"10\" x=\"618.5\" xlink:href=\"#PortSymbol\" y=\"413.5\" /></g><g class=\"Box CP_OUT context-_3Ko5oLB_EeqLtsTDMgEHBw context-_b-Xr8UhSEeyVkeSUJyVgbw\" id=\"_3Khk4LB_EeqLtsTDMgEHBw\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 653.5 440.5)\" width=\"10\" x=\"648.5\" xlink:href=\"#ComponentPortSymbol\" y=\"435.5\" /></g><g class=\"Box CP_IN context-_e8OmYKjsEeu7PunlgwoBGA\" id=\"_B6D3sKjsEeu7PunlgwoBGA\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(0 561.5 363.5)\" width=\"10\" x=\"556.5\" xlink:href=\"#ComponentPortSymbol\" y=\"358.5\" /></g><g class=\"Box CP_OUT context-_faMrEkybEeyns9TdzUL1Ow\" id=\"_fZ8zcUybEeyns9TdzUL1Ow\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(90 468.5 365.5)\" width=\"10\" x=\"463.5\" xlink:href=\"#ComponentPortSymbol\" y=\"360.5\" /></g><g class=\"Box CP_IN context-_IXg70OQUEe2jpIKbeHI0hw context-_WbdGoLB_EeqLtsTDMgEHBw context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_WV0_wLB_EeqLtsTDMgEHBw\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 358.5 130.5)\" width=\"10\" x=\"353.5\" xlink:href=\"#ComponentPortSymbol\" y=\"125.5\" /></g><g class=\"Box CP_IN context-_E2dKmkhREeyVkeSUJyVgbw context-_XNOh0LB_EeqLtsTDMgEHBw\" id=\"_XNJpULB_EeqLtsTDMgEHBw\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 358.5 421.5)\" width=\"10\" x=\"353.5\" xlink:href=\"#ComponentPortSymbol\" y=\"416.5\" /></g><g class=\"Box LogicalHumanActor context-_WYyNILB_EeqLtsTDMgEHBw context-_WbdGoLB_EeqLtsTDMgEHBw context-_syJloMEDEeqW8_YksX3uDg context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_WUfYcLB-EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"171\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"158\" x=\"25.5\" y=\"25.5\" /><text class=\"LogicalHumanActor\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"25\" y=\"25\"><tspan x=\"114.5\" xml:space=\"preserve\" y=\"33.714285714285715\">Prof. A. P. W. B.</tspan><tspan x=\"114.5\" xml:space=\"preserve\" y=\"45.142857142857146\">Dumbledore</tspan></text><use height=\"20\" width=\"20\" x=\"60.0\" xlink:href=\"#LogicalHumanActorSymbol\" y=\"27.870129870129873\" /></g><g class=\"Box LogicalFunction context-_riSgQMEDEeqW8_YksX3uDg context-_syJloMEDEeqW8_YksX3uDg\" id=\"_HyCUQLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"74.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"83.28571428571428\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"92.14285714285714\">manage the</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"107.85714285714286\">school</tspan></text><use height=\"20\" width=\"20\" x=\"54.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"87.85714285714285\" /></g><g class=\"Box FOP context-_syJloMEDEeqW8_YksX3uDg\" id=\"_riSgQMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 100.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"95.5\" /></g><g class=\"Box LogicalFunction context-_qqumIMEDEeqW8_YksX3uDg context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_RCi2ULCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"134.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"151.14285714285714\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"160.0\">advise Harry</tspan></text><use height=\"20\" width=\"20\" x=\"52.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"150.0\" /></g><g class=\"Box FOP context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_qqumIMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 160.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"155.5\" /></g><g class=\"Box CP_OUT context-_WbdGoLB_EeqLtsTDMgEHBw context-_syJloMEDEeqW8_YksX3uDg context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_WYyNILB_EeqLtsTDMgEHBw\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 180.5 130.5)\" width=\"10\" x=\"175.5\" xlink:href=\"#ComponentPortSymbol\" y=\"125.5\" /></g><g class=\"Box LogicalHumanActor context-_E2dxpUhREeyVkeSUJyVgbw context-_XNEJwLB_EeqLtsTDMgEHBw context-_XNOh0LB_EeqLtsTDMgEHBw context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_4CrKULB-EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"211\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"158\" x=\"25.5\" y=\"315.5\" /><text class=\"LogicalHumanActor\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"25\" y=\"315\"><tspan x=\"114.5\" xml:space=\"preserve\" y=\"325.85714285714283\">Prof. S. Snape</tspan></text><use height=\"20\" width=\"20\" x=\"63.0\" xlink:href=\"#LogicalHumanActorSymbol\" y=\"315.85714285714283\" /></g><g class=\"Box LogicalFunction context-_E2dxpUhREeyVkeSUJyVgbw context-_IXbcMuQUEe2jpIKbeHI0hw context-_RmRSwMTrEeqlbN5fRfdrWQ context-_gQ9V8MEDEeqW8_YksX3uDg\" id=\"_aDTsMrCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"54\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"354.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"373.14285714285717\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"382.0\">Teaching</tspan></text><use height=\"20\" width=\"20\" x=\"61.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"372.0\" /></g><g class=\"Box FOP context-_E2dxpUhREeyVkeSUJyVgbw context-_IXbcMuQUEe2jpIKbeHI0hw context-_RmRSwMTrEeqlbN5fRfdrWQ\" id=\"_gQ9V8MEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 370.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"365.5\" /></g><g class=\"Box LogicalFunction context-_maL-AMEDEeqW8_YksX3uDg context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_fUFCQLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"81\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"424.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"417.35714285714283\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"426.21428571428567\">maintain a</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"441.9285714285714\">layer of</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"457.6428571428571\">defense for</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"473.35714285714283\">the</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"489.07142857142856\">Sorcerer's</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"504.7857142857143\">Stone</tspan></text><use height=\"20\" width=\"20\" x=\"55.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"450.49999999999994\" /></g><g class=\"Box FOP context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_maL-AMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 441.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"436.5\" /></g><g class=\"Box CP_OUT context-_E2dxpUhREeyVkeSUJyVgbw context-_XNOh0LB_EeqLtsTDMgEHBw context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_XNEJwLB_EeqLtsTDMgEHBw\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 180.5 422.5)\" width=\"10\" x=\"175.5\" xlink:href=\"#ComponentPortSymbol\" y=\"417.5\" /></g><g class=\"Box LogicalActor context-_RP7wgtZEEeqiU8uzTY0Puw context-_VBCl8MTqEeqlbN5fRfdrWQ context-_YwIt4MTqEeqlbN5fRfdrWQ context-_YwLxMMTqEeqlbN5fRfdrWQ context-_faBE40ybEeyns9TdzUL1Ow context-_faMEFEybEeyns9TdzUL1Ow context-_z-LwYMTmEeqlbN5fRfdrWQ context-_z5h54MTmEeqlbN5fRfdrWQ\" id=\"_yCkzoLB_EeqLtsTDMgEHBw\"><rect class=\"LogicalActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"131\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"200\" x=\"967.5\" y=\"25.5\" /><text class=\"LogicalActor\" dominant-baseline=\"middle\" fill=\"#000000\" text-anchor=\"middle\" x=\"967\" y=\"25\"><tspan x=\"1077.5\" xml:space=\"preserve\" y=\"35.85714285714286\">Harry J. Potter</tspan></text><use height=\"20\" width=\"20\" x=\"1025.5\" xlink:href=\"#LogicalActorSymbol\" y=\"25.85714285714286\" /></g><g class=\"Box LogicalFunction context-_0nQlwMTqEeqlbN5fRfdrWQ context-_8Fj_0MTpEeqlbN5fRfdrWQ context-_8FlN8cTpEeqlbN5fRfdrWQ context-_B7YjssTqEeqlbN5fRfdrWQ context-_FNwX8NZEEeqiU8uzTY0Puw context-_RP7wgtZEEeqiU8uzTY0Puw context-_VBCl8MTqEeqlbN5fRfdrWQ context-_faMEFEybEeyns9TdzUL1Ow\" id=\"_nccmwMTpEeqlbN5fRfdrWQ\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"61\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"110\" x=\"1007.5\" y=\"54.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1007\" y=\"67.35714285714286\"><tspan x=\"1072.5\" xml:space=\"preserve\" y=\"74.07142857142857\">kill He Who</tspan><tspan x=\"1072.5\" xml:space=\"preserve\" y=\"85.5\">Must Not Be</tspan><tspan x=\"1072.5\" xml:space=\"preserve\" y=\"96.92857142857143\">Named</tspan></text><use height=\"20\" width=\"20\" x=\"1024.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"76.53896103896103\" /></g><g class=\"Box FIP context-_0nQlwMTqEeqlbN5fRfdrWQ context-_VBCl8MTqEeqlbN5fRfdrWQ context-_faMEFEybEeyns9TdzUL1Ow\" id=\"_8Fj_0MTpEeqlbN5fRfdrWQ\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1010.5 80.5)\" width=\"10\" x=\"1005.5\" xlink:href=\"#PortSymbol\" y=\"75.5\" /></g><g class=\"Box FIP context-_8FlN8cTpEeqlbN5fRfdrWQ context-_B7YjssTqEeqlbN5fRfdrWQ context-_RP7wgtZEEeqiU8uzTY0Puw\" id=\"_FNwX8NZEEeqiU8uzTY0Puw\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(0 1024.5 112.5)\" width=\"10\" x=\"1019.5\" xlink:href=\"#PortSymbol\" y=\"107.5\" /></g><g class=\"Box CP_INOUT context-_VBCl8MTqEeqlbN5fRfdrWQ context-_z-LwYMTmEeqlbN5fRfdrWQ\" id=\"_z5h54MTmEeqlbN5fRfdrWQ\"><rect class=\"CP_INOUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(90 970.5 40.5)\" width=\"10\" x=\"965.5\" y=\"35.5\" /></g><g class=\"Box CP_IN context-_RP7wgtZEEeqiU8uzTY0Puw context-_YwLxMMTqEeqlbN5fRfdrWQ\" id=\"_YwIt4MTqEeqlbN5fRfdrWQ\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(180 1152.5 153.5)\" width=\"10\" x=\"1147.5\" xlink:href=\"#ComponentPortSymbol\" y=\"148.5\" /></g><g class=\"Box CP_IN context-_faMEFEybEeyns9TdzUL1Ow\" id=\"_faBE40ybEeyns9TdzUL1Ow\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 970.5 30.5)\" width=\"10\" x=\"965.5\" xlink:href=\"#ComponentPortSymbol\" y=\"25.5\" /></g><g class=\"Box LogicalHumanActor context-_3KmdYLB_EeqLtsTDMgEHBw context-_3Ko5oLB_EeqLtsTDMgEHBw context-_RP8-gtZEEeqiU8uzTY0Puw context-_RP8XdNZEEeqiU8uzTY0Puw context-_YwGRoMTqEeqlbN5fRfdrWQ context-_YwLxMMTqEeqlbN5fRfdrWQ context-_b-Xr7EhSEeyVkeSUJyVgbw\" id=\"_zuBo0LB_EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"171\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"200\" x=\"967.5\" y=\"395.5\" /><text class=\"LogicalHumanActor\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"967\" y=\"395\"><tspan x=\"1077.5\" xml:space=\"preserve\" y=\"405.85714285714283\">R. Weasley</tspan></text><use height=\"20\" width=\"20\" x=\"1033.0\" xlink:href=\"#LogicalHumanActorSymbol\" y=\"395.85714285714283\" /></g><g class=\"Box LogicalFunction context-_8FiKoMTpEeqlbN5fRfdrWQ context-_8FlN8cTpEeqlbN5fRfdrWQ context-_RP8XdNZEEeqiU8uzTY0Puw\" id=\"_toddEMTpEeqlbN5fRfdrWQ\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"101\" x=\"1017.5\" y=\"434.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1017\" y=\"451.14285714285717\"><tspan x=\"1078.0\" xml:space=\"preserve\" y=\"460.0\">assist Harry</tspan></text><use height=\"20\" width=\"20\" x=\"1031.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"450.0\" /></g><g class=\"Box FOP context-_8FlN8cTpEeqlbN5fRfdrWQ context-_RP8XdNZEEeqiU8uzTY0Puw\" id=\"_8FiKoMTpEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1115.5 454.5)\" width=\"10\" x=\"1110.5\" xlink:href=\"#PortSymbol\" y=\"449.5\" /></g><g class=\"Box LogicalFunction context-_B7X8oMTqEeqlbN5fRfdrWQ context-_B7YjssTqEeqlbN5fRfdrWQ context-_RP8-gtZEEeqiU8uzTY0Puw context-_b-Xr7EhSEeyVkeSUJyVgbw context-_phubwMTqEeqlbN5fRfdrWQ context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_0dxIAMTpEeqlbN5fRfdrWQ\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"101\" x=\"1017.5\" y=\"494.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1017\" y=\"507.57142857142856\"><tspan x=\"1078.0\" xml:space=\"preserve\" y=\"514.2857142857142\">break school</tspan><tspan x=\"1078.0\" xml:space=\"preserve\" y=\"525.7142857142857\">rules</tspan></text><use height=\"20\" width=\"20\" x=\"1029.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"508.44155844155836\" /></g><g class=\"Box FOP context-_B7YjssTqEeqlbN5fRfdrWQ context-_RP8-gtZEEeqiU8uzTY0Puw\" id=\"_B7X8oMTqEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1115.5 504.5)\" width=\"10\" x=\"1110.5\" xlink:href=\"#PortSymbol\" y=\"499.5\" /></g><g class=\"Box FIP context-_b-Xr7EhSEeyVkeSUJyVgbw context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_phubwMTqEeqlbN5fRfdrWQ\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1020.5 513.5)\" width=\"10\" x=\"1015.5\" xlink:href=\"#PortSymbol\" y=\"508.5\" /></g><g class=\"Box CP_IN context-_3Ko5oLB_EeqLtsTDMgEHBw context-_b-Xr7EhSEeyVkeSUJyVgbw\" id=\"_3KmdYLB_EeqLtsTDMgEHBw\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 970.5 532.5)\" width=\"10\" x=\"965.5\" xlink:href=\"#ComponentPortSymbol\" y=\"527.5\" /></g><g class=\"Box CP_OUT context-_RP8-gtZEEeqiU8uzTY0Puw context-_RP8XdNZEEeqiU8uzTY0Puw context-_YwLxMMTqEeqlbN5fRfdrWQ\" id=\"_YwGRoMTqEeqlbN5fRfdrWQ\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-180 1154.5 398.5)\" width=\"10\" x=\"1149.5\" xlink:href=\"#ComponentPortSymbol\" y=\"393.5\" /></g><g class=\"Edge FunctionalExchange\" id=\"_PEmXoMEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 518.5 540.5 613.5 540.5 613.5 540.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"531.5\" y=\"522\"><tspan x=\"577.5\" xml:space=\"preserve\" y=\"532.8571428571429\">wizardry</tspan></text><use height=\"20\" width=\"20\" x=\"537.0\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"522.8571428571429\" /></g><g class=\"Edge FIPAllocation\" id=\"_twPK8MTnEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 363.5 130.5 375.5 130.5 375.5 540.5 383.5 540.5 383.5 540.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"375\" y=\"193\"><tspan x=\"375.0\" xml:space=\"preserve\" y=\"196.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_RmRSwMTrEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 138.5 370.5 375.5 370.5 375.5 540.5 383.5 540.5 383.5 540.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"285.5\" y=\"385\"><tspan x=\"337.5\" xml:space=\"preserve\" y=\"395.85714285714283\">Knowledge</tspan></text><use height=\"20\" width=\"20\" x=\"291.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"385.85714285714283\" /></g><g class=\"Edge FIPAllocation\" id=\"_E2dKmkhREeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 359.5 426.5 386.5 535.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"380\" y=\"474\"><tspan x=\"380.0\" xml:space=\"preserve\" y=\"477.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_0nQlwMTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 632.5 148.5 885.5 148.5 885.5 78.5 1005.5 78.5 1005.5 80.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"761.5\" y=\"132\"><tspan x=\"832.5\" xml:space=\"preserve\" y=\"140.71428571428572\">educate &amp; mature</tspan></text><use height=\"20\" width=\"20\" x=\"770.0\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"130.71428571428572\" /></g><g class=\"Edge FOPAllocation\" id=\"_HDIA8MTnEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 648.5 124.5 632.5 143.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"641\" y=\"128\"><tspan x=\"641.0\" xml:space=\"preserve\" y=\"131.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_IXbcMuQUEe2jpIKbeHI0hw\"><path class=\"Edge\" d=\"M 138.5 370.5 375.5 370.5 375.5 140.5 487.5 140.5 487.5 138.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"304.5\" y=\"246\"><tspan x=\"348.5\" xml:space=\"preserve\" y=\"254.71428571428572\">educate</tspan></text><use height=\"20\" width=\"20\" x=\"309.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"244.71428571428572\" /></g><g class=\"Edge FIPAllocation\" id=\"_IXg70OQUEe2jpIKbeHI0hw\"><path class=\"Edge\" d=\"M 363.5 129.5 487.5 138.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"426\" y=\"123\"><tspan x=\"426.0\" xml:space=\"preserve\" y=\"126.0\" /></text></g><g class=\"Edge ComponentExchange\" id=\"_z-LwYMTmEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 965.5 40.5 855.5 40.5 855.5 120.5 658.5 120.5 658.5 119.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"775.5\" y=\"95\"><tspan x=\"821.5\" xml:space=\"preserve\" y=\"105.85714285714286\">Learning</tspan></text><use height=\"20\" width=\"20\" x=\"781.0\" xlink:href=\"#ComponentExchangeSymbol\" y=\"95.85714285714286\" /></g><g class=\"Edge ComponentExchange\" id=\"_e8OmYKjsEeu7PunlgwoBGA\"><path class=\"Edge\" d=\"M 561.5 186.5 561.5 358.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"562.5\" y=\"266\"><tspan x=\"597.5\" xml:space=\"preserve\" y=\"274.7142857142857\">Care</tspan></text><use height=\"20\" width=\"20\" x=\"566.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"264.7142857142857\" /></g><g class=\"Edge FunctionalExchange\" id=\"_phyGIMTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 628.5 418.5 996.5 418.5 996.5 512.5 1015.5 512.5 1015.5 513.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"845.5\" y=\"422\"><tspan x=\"898.5\" xml:space=\"preserve\" y=\"432.85714285714283\">punish</tspan></text><use height=\"20\" width=\"20\" x=\"862.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"422.85714285714283\" /></g><g class=\"Edge FOPAllocation\" id=\"_b-Xr8UhSEeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 648.5 436.5 628.5 422.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"632\" y=\"437\"><tspan x=\"632.0\" xml:space=\"preserve\" y=\"440.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_faMrEkybEeyns9TdzUL1Ow\"><path class=\"Edge\" d=\"M 473.5 366.5 618.5 416.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"549\" y=\"382\"><tspan x=\"549.0\" xml:space=\"preserve\" y=\"385.0\" /></text></g><g class=\"Edge ComponentExchange\" id=\"_3Ko5oLB_EeqLtsTDMgEHBw\"><path class=\"Edge\" d=\"M 658.5 440.5 775.5 440.5 775.5 514.5 805.5 514.5 805.5 494.5 825.5 494.5 825.5 474.5 875.5 474.5 875.5 494.5 905.5 494.5 905.5 514.5 935.5 514.5 935.5 464.5 915.5 464.5 915.5 424.5 965.5 424.5 965.5 464.5 945.5 464.5 945.5 529.5 965.5 529.5 965.5 532.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"796.5\" y=\"444\"><tspan x=\"864.0\" xml:space=\"preserve\" y=\"452.7142857142857\">Punishment</tspan></text><use height=\"20\" width=\"20\" x=\"815.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"442.7142857142857\" /></g><g class=\"Edge ComponentExchange\" id=\"_WbdGoLB_EeqLtsTDMgEHBw\"><path class=\"Edge\" d=\"M 353.5 130.5 185.5 130.5 185.5 130.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"216.5\" y=\"110\"><tspan x=\"294.0\" xml:space=\"preserve\" y=\"120.85714285714286\">Headmaster</tspan><tspan x=\"294.0\" xml:space=\"preserve\" y=\"136.57142857142858\">Responsibilities</tspan></text><use height=\"20\" width=\"20\" x=\"237.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"115.57142857142857\" /></g><g class=\"Edge ComponentExchange\" id=\"_XNOh0LB_EeqLtsTDMgEHBw\"><path class=\"Edge\" d=\"M 185.5 422.5 353.5 422.5 353.5 421.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"185.5\" y=\"400\"><tspan x=\"263.0\" xml:space=\"preserve\" y=\"410.85714285714283\">Teacher...</tspan></text><use height=\"20\" width=\"20\" x=\"206.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"400.85714285714283\" /></g><g class=\"Edge FOPAllocation\" id=\"_syJloMEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 175.5 130.5 155.5 130.5 155.5 101.5 138.5 101.5 138.5 100.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"166\" y=\"141\"><tspan x=\"166.0\" xml:space=\"preserve\" y=\"144.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_u8br4MEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 175.5 130.5 155.5 130.5 155.5 161.5 138.5 161.5 138.5 160.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"157\" y=\"129\"><tspan x=\"157.0\" xml:space=\"preserve\" y=\"132.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_E2dxpUhREeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 175.5 422.5 155.5 422.5 155.5 371.5 138.5 371.5 138.5 370.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"155\" y=\"384\"><tspan x=\"155.0\" xml:space=\"preserve\" y=\"387.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_o4KcUMEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 175.5 422.5 155.5 422.5 155.5 441.5 138.5 441.5 138.5 441.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"160\" y=\"420\"><tspan x=\"160.0\" xml:space=\"preserve\" y=\"423.0\" /></text></g><g class=\"Edge FIPAllocation\" id=\"_VBCl8MTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 975.5 40.5 987.5 40.5 987.5 80.5 1005.5 80.5 1005.5 80.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"995\" y=\"58\"><tspan x=\"995.0\" xml:space=\"preserve\" y=\"61.0\" /></text></g><g class=\"Edge FIPAllocation\" id=\"_faMEFEybEeyns9TdzUL1Ow\"><path class=\"Edge\" d=\"M 973.5 35.5 1006.5 75.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"997\" y=\"49\"><tspan x=\"997.0\" xml:space=\"preserve\" y=\"52.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_B7YjssTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 1120.5 504.5 1145.5 504.5 1145.5 214.5 1022.5 214.5 1022.5 117.5 1024.5 117.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1037.5\" y=\"192\"><tspan x=\"1087.0\" xml:space=\"preserve\" y=\"202.85714285714286\">friendship</tspan></text><use height=\"20\" width=\"20\" x=\"1043.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"192.85714285714286\" /></g><g class=\"Edge FunctionalExchange\" id=\"_8FlN8cTpEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 1120.5 454.5 1135.5 454.5 1135.5 265.5 1022.5 265.5 1022.5 117.5 1024.5 117.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1033.5\" y=\"247\"><tspan x=\"1083.5\" xml:space=\"preserve\" y=\"255.71428571428572\">assistance</tspan></text><use height=\"20\" width=\"20\" x=\"1039.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"245.71428571428572\" /></g><g class=\"Edge FIPAllocation\" id=\"_RP7wgtZEEeqiU8uzTY0Puw\"><path class=\"Edge\" d=\"M 1152.5 148.5 1152.5 135.5 1022.5 135.5 1022.5 117.5 1024.5 117.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"1148\" y=\"137\"><tspan x=\"1148.0\" xml:space=\"preserve\" y=\"140.0\" /></text></g><g class=\"Edge ComponentExchange\" id=\"_YwLxMMTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 1154.5 393.5 1154.5 158.5 1152.5 158.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"1038.5\" y=\"161\"><tspan x=\"1111.5\" xml:space=\"preserve\" y=\"171.85714285714286\">Help for Harry</tspan></text><use height=\"20\" width=\"20\" x=\"1058.0\" xlink:href=\"#ComponentExchangeSymbol\" y=\"161.85714285714286\" /></g><g class=\"Edge FOPAllocation\" id=\"_RP8XdNZEEeqiU8uzTY0Puw\"><path class=\"Edge\" d=\"M 1154.5 403.5 1159.5 403.5 1159.5 454.5 1120.5 454.5 1120.5 454.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"1159\" y=\"433\"><tspan x=\"1159.0\" xml:space=\"preserve\" y=\"436.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_RP8-gtZEEeqiU8uzTY0Puw\"><path class=\"Edge\" d=\"M 1154.5 403.5 1159.5 403.5 1159.5 504.5 1120.5 504.5 1120.5 504.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"1156\" y=\"458\"><tspan x=\"1156.0\" xml:space=\"preserve\" y=\"461.0\" /></text></g><g class=\"Edge FIPAllocation\" id=\"_b-Xr7EhSEeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 975.5 530.5 1015.5 517.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"999\" y=\"515\"><tspan x=\"999.0\" xml:space=\"preserve\" y=\"518.0\" /></text></g></svg></td></tr>\n",
       "</table>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "templ = \"\"\"\\\n",
    "<h2>{{ component.name }}</h2>\n",
    "{{ component.description }}\n",
    "<table>\n",
    "    <caption>Figure {{ fig_id }}: {{ fig_caption | e }}</caption>\n",
    "    <tr><td>{{ figure.as_svg | safe }}</td></tr>\n",
    "</table>\n",
    "\"\"\"\n",
    "diagram = model.diagrams.by_name(\"[LAB] Wizard Education\")\n",
    "rendered = env.from_string(templ).render(\n",
    "    component=model.search(\"LogicalComponent\").by_name(\"Hogwarts\"),\n",
    "    fig_id=1,\n",
    "    fig_caption=diagram.name,\n",
    "    figure=diagram,\n",
    ")\n",
    "HTML(rendered)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Hint: Take notice of the [jinja.Environment]. Instead of handing the figure_table-markup\n",
    "over in the rendering call you could also set an insert_figure_as_table function,\n",
    "which you ideally defined before, in the environment globals or you can define\n",
    "[macros] right in the template. These tools can automate repetitive content placement.*\n",
    "\n",
    "[jinja.Environment]: https://jinja.palletsprojects.com/en/3.0.x/api/#jinja2.Environment\n",
    "[macros]: https://jinja.palletsprojects.com/en/3.0.x/templates/#macros"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Template inheritance\n",
    "\n",
    "The last cell will present a routine where a full .html document is generated.\n",
    "Earlier rendered content were HTML-fragments to be precise. On top you can see\n",
    "a showcase on jinja's [template-inheritance] functionality. The special DictLoader\n",
    "gives support for finding the base template called \"template.html\". This was just\n",
    "needed because we are dealing with content in memory and didn't create template.html\n",
    "in our FileSystem before. Per default jinja is using the FileSystemLoader when\n",
    "creating an Environment. It's not a bad idea to check the [Loaders] they have, if\n",
    "you want to understand how template loading is working and/or plan on developing\n",
    "a pipeline system for document distribution.\n",
    "\n",
    "[template-inheritance]: https://jinja.palletsprojects.com/en/3.0.x/templates/#template-inheritance\n",
    "[Loaders]: https://jinja.palletsprojects.com/en/3.0.x/api/#loaders"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<!DOCTYPE html>\n",
       "<html>\n",
       "\n",
       "<head>\n",
       "    <style>\n",
       "        caption {\n",
       "            caption-side: bottom;\n",
       "            border-top: 1px solid silver;\n",
       "        }\n",
       "    </style>\n",
       "</head>\n",
       "\n",
       "<body>\n",
       "    <h2>Hogwarts</h2>\n",
       "<p>This instance is the mighty Hogwarts. Do you really need a description? Then maybe read the books or watch atleast the epic movies.</p>\n",
       "\n",
       "<table>\n",
       "    <caption>Figure 1: [LAB] Wizard Education</caption>\n",
       "    <tr><td><svg baseProfile=\"full\" class=\"LogicalArchitectureBlank\" font-family=\"'Open Sans','Segoe UI',Arial,sans-serif\" font-size=\"10px\" height=\"611\" shape-rendering=\"geometricPrecision\" version=\"1.1\" viewBox=\"15 15 1162 611\" width=\"1162\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:ev=\"http://www.w3.org/2001/xml-events\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><symbol id=\"LogicalComponentSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><path d=\"M18 237h46v43H18z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 247h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 261h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><g transform=\"scale(0.90705135,1.1024734)\"><path d=\"m 37.427456,20.821353 h 4.221475 V 50.90971 H 37.427456 Z M 39.538194,46.89517 H 56.75519 v 4.01454 H 39.538194 Z\" fill=\"#000\" stroke-width=\"0.1\" /></g></symbol><linearGradient id=\"CustomGradient_C3E6FF_96B1DA\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#C3E6FF\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#96B1DA\" stop-opacity=\"1\" /></linearGradient><symbol id=\"LogicalFunctionSymbol\" viewBox=\"0 0 79 79\"><linearGradient id=\"LF_green\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\"><stop offset=\"0.0\" stop-color=\"#6CB35B\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#ffffff\" stop-opacity=\"1\" /></linearGradient><ellipse cx=\"39.5\" cy=\"39.5\" fill=\"url(#LF_green)\" rx=\"26\" ry=\"21\" stroke=\"#000\" stroke-width=\"2\" /><text fill=\"#000\" font-family=\"'Open Sans','Segoe UI',Arial,sans-serif\" font-size=\"25px\" font-weight=\"bold\" stroke=\"none\" text-anchor=\"middle\" x=\"40\" y=\"50\">LF</text></symbol><symbol id=\"PortSymbol\" viewBox=\"0 0 10 10\"><path d=\"M0 0h10v10H0z\" /><path d=\"M5 1L1 9h8z\" fill=\"#fff\" /></symbol><linearGradient id=\"CustomGradient_EF2929_FFFFFF\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#EF2929\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#FFFFFF\" stop-opacity=\"1\" /></linearGradient><symbol id=\"ComponentPortSymbol\" viewBox=\"0 0 10 10\"><path d=\"M0 0h10v10H0z\" /><path d=\"M 2,2 5,7 8,2\" /></symbol><symbol id=\"LogicalHumanComponentSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><path d=\"M18 237h46v43H18z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 247h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 261h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><use transform=\"matrix(0.62,0,0,0.62,23.82,16.51)\" xlink:href=\"#StickFigureSymbol\" /></symbol><symbol id=\"StickFigureSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"362.861 210.892 75 75\"><g stroke=\"#000\" stroke-width=\"2.4944\" transform=\"matrix(1.0611338,0,0,1.0611338,-24.47665,-12.241673)\"><line fill=\"none\" x1=\"400.362\" x2=\"400.362\" y1=\"232.586\" y2=\"257.534\" /><line fill=\"none\" x1=\"400.83401\" x2=\"388.423\" y1=\"254.299\" y2=\"275.009\" /><line fill=\"none\" x1=\"400.25201\" x2=\"413.97\" y1=\"254.46001\" y2=\"274.987\" /><line fill=\"none\" x1=\"385.634\" x2=\"415.703\" y1=\"244.569\" y2=\"244.49699\" /><ellipse cx=\"400.53201\" cy=\"223.35899\" fill=\"none\" rx=\"9.2180004\" ry=\"8.5080004\" /></g></symbol><symbol id=\"LogicalHumanActorSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><use transform=\"matrix(0.81762456,0,0,0.81762456,-2.5207584,0.47091696)\" xlink:href=\"#StickFigureSymbol\" /></symbol><linearGradient id=\"CustomGradient_DAFDFF_C6E6FF\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#DAFDFF\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#C6E6FF\" stop-opacity=\"1\" /></linearGradient><symbol id=\"LogicalActorSymbol\" stroke=\"#000\" stroke-width=\"2\" viewBox=\"0 0 79 79\"><path d=\"M18 237h46v43H18z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 247h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><path d=\"M12 261h11v8H12z\" fill=\"#dbe6f4\" transform=\"translate(0 -218)\" /><g fill=\"#000\" stroke-width=\"0.1\" transform=\"scale(0.83010896,1.2046611)\"><path d=\"m 31.063676,19.942628 h 3.754427 v 26.759494 h -3.754427 z m 1.877213,23.189107 h 15.312173 v 3.570387 H 32.940889 Z\" /><path d=\"m 60.32612,19.942628 h 3.202306 l 9.864572,26.759494 H 69.344107 L 61.927273,25.114167 54.51044,46.702122 H 50.461548 Z M 55.007349,37.260842 H 69.08645 v 3.570387 H 55.007349 Z\" /></g></symbol><symbol id=\"FunctionalExchangeSymbol\" viewBox=\"0 0 40 30\"><linearGradient id=\"FunctionalExchangeSymbol-gradient\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#4F7C45\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#BCDDB4\" stop-opacity=\"1\" /></linearGradient><linearGradient id=\"FunctionalExchangeSymbol-gradientreverse\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#BCDDB4\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#4F7C45\" stop-opacity=\"1\" /></linearGradient><g stroke=\"#000\" stroke-width=\"2\"><path d=\"M 36.190065,5.0377724 V 24.962228 H 26.17482 V 5.0377724 Z\" fill=\"url(#FunctionalExchangeSymbol-gradientreverse)\" /><path d=\"m 14.372107,10 h 12.622435 c 0.926189,0.585267 1.836022,1.274509 2.268178,5 -0.208657,2.812473 -0.954601,4.503809 -2.273297,5 H 14.296948\" fill=\"#61c34c\" /><path d=\"M 3.9464908,5.0048246 V 24.995175 H 10.87518 C 12.433713,24.159139 15.158267,20.291241 15.313795,15 15.498614,11.583142 14.059659,6.6240913 10.87518,5.0048246 c -2.2179509,0 -4.5908341,0 -6.9286892,0 z\" fill=\"url(#FunctionalExchangeSymbol-gradient)\" /></g></symbol><symbol id=\"ComponentExchangeSymbol\" viewBox=\"0 0 40 30\"><linearGradient id=\"ComponentExchangeSymbol-gradient\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#8FA5B6\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#E0E9F3\" stop-opacity=\"1\" /></linearGradient><linearGradient id=\"ComponentExchangeSymbol-gradientreverse\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"1\"><stop offset=\"0.0\" stop-color=\"#E0E9F3\" stop-opacity=\"1\" /><stop offset=\"1.0\" stop-color=\"#8FA5B6\" stop-opacity=\"1\" /></linearGradient><g stroke=\"#000\" stroke-width=\"2\"><path d=\"M 36.190065,5.0377724 V 24.962228 H 26.17482 V 5.0377724 Z\" fill=\"url(#ComponentExchangeSymbol-gradientreverse)\" /><path d=\"m 14.372107,10 h 12.622435 c 0.926189,0.585267 1.836022,1.274509 2.268178,5 -0.208657,2.812473 -0.954601,4.503809 -2.273297,5 H 14.296948\" fill=\"#A3BCD0\" /><path d=\"M 3.9464908,5.0048246 V 24.995175 H 10.87518 C 12.433713,24.159139 15.158267,20.291241 15.313795,15 15.498614,11.583142 14.059659,6.6240913 10.87518,5.0048246 c -2.2179509,0 -4.5908341,0 -6.9286892,0 z\" fill=\"url(#ComponentExchangeSymbol-gradient)\" /></g></symbol></defs><rect fill=\"#fff\" height=\"611\" stroke=\"none\" width=\"1162\" x=\"15\" y=\"15\" /><g class=\"Box LogicalComponent context-_E2dKmkhREeyVkeSUJyVgbw context-_IXg70OQUEe2jpIKbeHI0hw context-_WV0_wLB_EeqLtsTDMgEHBw context-_WbdGoLB_EeqLtsTDMgEHBw context-_XNJpULB_EeqLtsTDMgEHBw context-_XNOh0LB_EeqLtsTDMgEHBw context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_dqPI4LB8EeqLtsTDMgEHBw\"><rect class=\"LogicalComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"591\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"411\" x=\"355.5\" y=\"25.5\" /><text class=\"LogicalComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"355\" y=\"25\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"35.85714285714286\">Hogwarts</tspan></text><use height=\"20\" width=\"20\" x=\"529.5\" xlink:href=\"#LogicalComponentSymbol\" y=\"25.85714285714286\" /></g><g class=\"Box LogicalFunction context-_E2dKmkhREeyVkeSUJyVgbw context-_PEjUUMEDEeqW8_YksX3uDg context-_PEmXoMEDEeqW8_YksX3uDg context-_RmRSwMTrEeqlbN5fRfdrWQ context-_che_8MTnEeqlbN5fRfdrWQ context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_GHiygMECEeqW8_YksX3uDg\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"131\" x=\"385.5\" y=\"514.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"385\" y=\"523.2857142857143\"><tspan x=\"461.0\" xml:space=\"preserve\" y=\"532.1428571428572\">produce Great</tspan><tspan x=\"461.0\" xml:space=\"preserve\" y=\"547.8571428571429\">Wizards</tspan></text><use height=\"20\" width=\"20\" x=\"408.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"527.8571428571429\" /></g><g class=\"Box FOP context-_PEmXoMEDEeqW8_YksX3uDg\" id=\"_PEjUUMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 513.5 540.5)\" width=\"10\" x=\"508.5\" xlink:href=\"#PortSymbol\" y=\"535.5\" /></g><g class=\"Box FIP context-_E2dKmkhREeyVkeSUJyVgbw context-_RmRSwMTrEeqlbN5fRfdrWQ context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_che_8MTnEeqlbN5fRfdrWQ\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 388.5 540.5)\" width=\"10\" x=\"383.5\" xlink:href=\"#PortSymbol\" y=\"535.5\" /></g><g class=\"Box LogicalFunction context-_PElJgcEDEeqW8_YksX3uDg context-_PEmXoMEDEeqW8_YksX3uDg\" id=\"_IrIUIMEDEeqW8_YksX3uDg\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"110\" x=\"615.5\" y=\"514.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"615\" y=\"507.57142857142856\"><tspan x=\"680.5\" xml:space=\"preserve\" y=\"516.4285714285714\">protect</tspan><tspan x=\"680.5\" xml:space=\"preserve\" y=\"532.1428571428571\">Students</tspan><tspan x=\"680.5\" xml:space=\"preserve\" y=\"547.8571428571428\">against the...</tspan></text><use height=\"20\" width=\"20\" x=\"631.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"523.5714285714286\" /></g><g class=\"Box FIP context-_PEmXoMEDEeqW8_YksX3uDg\" id=\"_PElJgcEDEeqW8_YksX3uDg\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 618.5 540.5)\" width=\"10\" x=\"613.5\" xlink:href=\"#PortSymbol\" y=\"535.5\" /></g><g class=\"Box LogicalComponent\" id=\"_8EyHIMZyEeqlbN5fRfdrWQ\"><rect class=\"LogicalComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"421\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"231\" x=\"445.5\" y=\"64.5\" /><text class=\"LogicalComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"445\" y=\"64\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"74.85714285714286\">Campus</tspan></text><use height=\"20\" width=\"20\" x=\"533.0\" xlink:href=\"#LogicalComponentSymbol\" y=\"64.85714285714286\" /></g><g class=\"Box LogicalComponent context-_B6BbcKjsEeu7PunlgwoBGA context-_HDIA8MTnEeqlbN5fRfdrWQ context-_e8OmYKjsEeu7PunlgwoBGA context-_z-LwYMTmEeqlbN5fRfdrWQ context-_z8ZnsMTmEeqlbN5fRfdrWQ\" id=\"_parwwLB_EeqLtsTDMgEHBw\"><rect class=\"LogicalComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"94\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"191\" x=\"465.5\" y=\"90.5\" /><text class=\"LogicalComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"465\" y=\"90\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"98.71428571428572\">School</tspan></text><use height=\"20\" width=\"20\" x=\"536.5\" xlink:href=\"#LogicalComponentSymbol\" y=\"88.71428571428572\" /></g><g class=\"Box LogicalFunction context-_0nQlwMTqEeqlbN5fRfdrWQ context-_FxI0oMTnEeqlbN5fRfdrWQ context-_HDIA8MTnEeqlbN5fRfdrWQ context-_IXOn4uQUEe2jpIKbeHI0hw context-_IXQdEeQUEe2jpIKbeHI0hw context-_IXbcMuQUEe2jpIKbeHI0hw context-_IXg70OQUEe2jpIKbeHI0hw\" id=\"_ilRGMLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"31\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"141\" x=\"489.5\" y=\"132.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"489\" y=\"141.78571428571428\"><tspan x=\"570.0\" xml:space=\"preserve\" y=\"148.5\">educate Wizards</tspan></text><use height=\"20\" width=\"20\" x=\"512.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"138.5\" /></g><g class=\"Box FOP context-_0nQlwMTqEeqlbN5fRfdrWQ context-_HDIA8MTnEeqlbN5fRfdrWQ\" id=\"_FxI0oMTnEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 627.5 148.5)\" width=\"10\" x=\"622.5\" xlink:href=\"#PortSymbol\" y=\"143.5\" /></g><g class=\"Box FIP context-_IXbcMuQUEe2jpIKbeHI0hw context-_IXg70OQUEe2jpIKbeHI0hw\" id=\"_IXOn4uQUEe2jpIKbeHI0hw\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 492.5 138.5)\" width=\"10\" x=\"487.5\" xlink:href=\"#PortSymbol\" y=\"133.5\" /></g><g class=\"Box FOP\" id=\"_IXQdEeQUEe2jpIKbeHI0hw\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(270 492.5 149.5)\" width=\"10\" x=\"487.5\" xlink:href=\"#PortSymbol\" y=\"144.5\" /></g><g class=\"Box CP_UNSET context-_HDIA8MTnEeqlbN5fRfdrWQ context-_z-LwYMTmEeqlbN5fRfdrWQ\" id=\"_z8ZnsMTmEeqlbN5fRfdrWQ\"><rect class=\"CP_UNSET\" fill=\"url(&quot;#CustomGradient_EF2929_FFFFFF&quot;)\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 653.5 119.5)\" width=\"10\" x=\"648.5\" y=\"114.5\" /></g><g class=\"Box CP_OUT context-_e8OmYKjsEeu7PunlgwoBGA\" id=\"_B6BbcKjsEeu7PunlgwoBGA\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(0 561.5 181.5)\" width=\"10\" x=\"556.5\" xlink:href=\"#ComponentPortSymbol\" y=\"176.5\" /></g><g class=\"Box LogicalHumanComponent context-_3Khk4LB_EeqLtsTDMgEHBw context-_3Ko5oLB_EeqLtsTDMgEHBw context-_B6D3sKjsEeu7PunlgwoBGA context-_b-Xr8UhSEeyVkeSUJyVgbw context-_e8OmYKjsEeu7PunlgwoBGA context-_fZ8zcUybEeyns9TdzUL1Ow context-_faMrEkybEeyns9TdzUL1Ow\" id=\"_BkQ1ULB_EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanComponent\" fill=\"url(&quot;#CustomGradient_C3E6FF_96B1DA&quot;)\" height=\"104\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"191\" x=\"465.5\" y=\"360.5\" /><text class=\"LogicalHumanComponent\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"465\" y=\"360\"><tspan x=\"571.0\" xml:space=\"preserve\" y=\"370.85714285714283\">Whomping Willow</tspan></text><use height=\"20\" width=\"20\" x=\"510.0\" xlink:href=\"#LogicalHumanComponentSymbol\" y=\"360.85714285714283\" /></g><g class=\"Box LogicalFunction context-_TLfg8MTnEeqlbN5fRfdrWQ context-_b-Xr8UhSEeyVkeSUJyVgbw context-_faMrEkybEeyns9TdzUL1Ow context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_otKRgLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"51\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"141\" x=\"485.5\" y=\"392.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"485\" y=\"393.92857142857144\"><tspan x=\"566.0\" xml:space=\"preserve\" y=\"402.7857142857143\">defend the</tspan><tspan x=\"566.0\" xml:space=\"preserve\" y=\"418.5\">surrounding area</tspan><tspan x=\"566.0\" xml:space=\"preserve\" y=\"434.2142857142857\">against Intruders</tspan></text><use height=\"20\" width=\"20\" x=\"506.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"409.92857142857144\" /></g><g class=\"Box FOP context-_b-Xr8UhSEeyVkeSUJyVgbw context-_faMrEkybEeyns9TdzUL1Ow context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_TLfg8MTnEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 623.5 418.5)\" width=\"10\" x=\"618.5\" xlink:href=\"#PortSymbol\" y=\"413.5\" /></g><g class=\"Box CP_OUT context-_3Ko5oLB_EeqLtsTDMgEHBw context-_b-Xr8UhSEeyVkeSUJyVgbw\" id=\"_3Khk4LB_EeqLtsTDMgEHBw\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 653.5 440.5)\" width=\"10\" x=\"648.5\" xlink:href=\"#ComponentPortSymbol\" y=\"435.5\" /></g><g class=\"Box CP_IN context-_e8OmYKjsEeu7PunlgwoBGA\" id=\"_B6D3sKjsEeu7PunlgwoBGA\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(0 561.5 363.5)\" width=\"10\" x=\"556.5\" xlink:href=\"#ComponentPortSymbol\" y=\"358.5\" /></g><g class=\"Box CP_OUT context-_faMrEkybEeyns9TdzUL1Ow\" id=\"_fZ8zcUybEeyns9TdzUL1Ow\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(90 468.5 365.5)\" width=\"10\" x=\"463.5\" xlink:href=\"#ComponentPortSymbol\" y=\"360.5\" /></g><g class=\"Box CP_IN context-_IXg70OQUEe2jpIKbeHI0hw context-_WbdGoLB_EeqLtsTDMgEHBw context-_twPK8MTnEeqlbN5fRfdrWQ\" id=\"_WV0_wLB_EeqLtsTDMgEHBw\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 358.5 130.5)\" width=\"10\" x=\"353.5\" xlink:href=\"#ComponentPortSymbol\" y=\"125.5\" /></g><g class=\"Box CP_IN context-_E2dKmkhREeyVkeSUJyVgbw context-_XNOh0LB_EeqLtsTDMgEHBw\" id=\"_XNJpULB_EeqLtsTDMgEHBw\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 358.5 421.5)\" width=\"10\" x=\"353.5\" xlink:href=\"#ComponentPortSymbol\" y=\"416.5\" /></g><g class=\"Box LogicalHumanActor context-_WYyNILB_EeqLtsTDMgEHBw context-_WbdGoLB_EeqLtsTDMgEHBw context-_syJloMEDEeqW8_YksX3uDg context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_WUfYcLB-EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"171\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"158\" x=\"25.5\" y=\"25.5\" /><text class=\"LogicalHumanActor\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"25\" y=\"25\"><tspan x=\"114.5\" xml:space=\"preserve\" y=\"33.714285714285715\">Prof. A. P. W. B.</tspan><tspan x=\"114.5\" xml:space=\"preserve\" y=\"45.142857142857146\">Dumbledore</tspan></text><use height=\"20\" width=\"20\" x=\"60.0\" xlink:href=\"#LogicalHumanActorSymbol\" y=\"27.870129870129873\" /></g><g class=\"Box LogicalFunction context-_riSgQMEDEeqW8_YksX3uDg context-_syJloMEDEeqW8_YksX3uDg\" id=\"_HyCUQLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"74.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"83.28571428571428\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"92.14285714285714\">manage the</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"107.85714285714286\">school</tspan></text><use height=\"20\" width=\"20\" x=\"54.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"87.85714285714285\" /></g><g class=\"Box FOP context-_syJloMEDEeqW8_YksX3uDg\" id=\"_riSgQMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 100.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"95.5\" /></g><g class=\"Box LogicalFunction context-_qqumIMEDEeqW8_YksX3uDg context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_RCi2ULCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"134.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"151.14285714285714\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"160.0\">advise Harry</tspan></text><use height=\"20\" width=\"20\" x=\"52.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"150.0\" /></g><g class=\"Box FOP context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_qqumIMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 160.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"155.5\" /></g><g class=\"Box CP_OUT context-_WbdGoLB_EeqLtsTDMgEHBw context-_syJloMEDEeqW8_YksX3uDg context-_u8br4MEDEeqW8_YksX3uDg\" id=\"_WYyNILB_EeqLtsTDMgEHBw\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 180.5 130.5)\" width=\"10\" x=\"175.5\" xlink:href=\"#ComponentPortSymbol\" y=\"125.5\" /></g><g class=\"Box LogicalHumanActor context-_E2dxpUhREeyVkeSUJyVgbw context-_XNEJwLB_EeqLtsTDMgEHBw context-_XNOh0LB_EeqLtsTDMgEHBw context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_4CrKULB-EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"211\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"158\" x=\"25.5\" y=\"315.5\" /><text class=\"LogicalHumanActor\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"25\" y=\"315\"><tspan x=\"114.5\" xml:space=\"preserve\" y=\"325.85714285714283\">Prof. S. Snape</tspan></text><use height=\"20\" width=\"20\" x=\"63.0\" xlink:href=\"#LogicalHumanActorSymbol\" y=\"315.85714285714283\" /></g><g class=\"Box LogicalFunction context-_E2dxpUhREeyVkeSUJyVgbw context-_IXbcMuQUEe2jpIKbeHI0hw context-_RmRSwMTrEeqlbN5fRfdrWQ context-_gQ9V8MEDEeqW8_YksX3uDg\" id=\"_aDTsMrCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"54\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"354.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"373.14285714285717\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"382.0\">Teaching</tspan></text><use height=\"20\" width=\"20\" x=\"61.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"372.0\" /></g><g class=\"Box FOP context-_E2dxpUhREeyVkeSUJyVgbw context-_IXbcMuQUEe2jpIKbeHI0hw context-_RmRSwMTrEeqlbN5fRfdrWQ\" id=\"_gQ9V8MEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 370.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"365.5\" /></g><g class=\"Box LogicalFunction context-_maL-AMEDEeqW8_YksX3uDg context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_fUFCQLCBEeqLtsTDMgEHBw\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"81\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"91\" x=\"45.5\" y=\"424.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"45\" y=\"417.35714285714283\"><tspan x=\"101.0\" xml:space=\"preserve\" y=\"426.21428571428567\">maintain a</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"441.9285714285714\">layer of</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"457.6428571428571\">defense for</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"473.35714285714283\">the</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"489.07142857142856\">Sorcerer's</tspan><tspan x=\"101.0\" xml:space=\"preserve\" y=\"504.7857142857143\">Stone</tspan></text><use height=\"20\" width=\"20\" x=\"55.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"450.49999999999994\" /></g><g class=\"Box FOP context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_maL-AMEDEeqW8_YksX3uDg\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 133.5 441.5)\" width=\"10\" x=\"128.5\" xlink:href=\"#PortSymbol\" y=\"436.5\" /></g><g class=\"Box CP_OUT context-_E2dxpUhREeyVkeSUJyVgbw context-_XNOh0LB_EeqLtsTDMgEHBw context-_o4KcUMEDEeqW8_YksX3uDg\" id=\"_XNEJwLB_EeqLtsTDMgEHBw\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-90 180.5 422.5)\" width=\"10\" x=\"175.5\" xlink:href=\"#ComponentPortSymbol\" y=\"417.5\" /></g><g class=\"Box LogicalActor context-_RP7wgtZEEeqiU8uzTY0Puw context-_VBCl8MTqEeqlbN5fRfdrWQ context-_YwIt4MTqEeqlbN5fRfdrWQ context-_YwLxMMTqEeqlbN5fRfdrWQ context-_faBE40ybEeyns9TdzUL1Ow context-_faMEFEybEeyns9TdzUL1Ow context-_z-LwYMTmEeqlbN5fRfdrWQ context-_z5h54MTmEeqlbN5fRfdrWQ\" id=\"_yCkzoLB_EeqLtsTDMgEHBw\"><rect class=\"LogicalActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"131\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"200\" x=\"967.5\" y=\"25.5\" /><text class=\"LogicalActor\" dominant-baseline=\"middle\" fill=\"#000000\" text-anchor=\"middle\" x=\"967\" y=\"25\"><tspan x=\"1077.5\" xml:space=\"preserve\" y=\"35.85714285714286\">Harry J. Potter</tspan></text><use height=\"20\" width=\"20\" x=\"1025.5\" xlink:href=\"#LogicalActorSymbol\" y=\"25.85714285714286\" /></g><g class=\"Box LogicalFunction context-_0nQlwMTqEeqlbN5fRfdrWQ context-_8Fj_0MTpEeqlbN5fRfdrWQ context-_8FlN8cTpEeqlbN5fRfdrWQ context-_B7YjssTqEeqlbN5fRfdrWQ context-_FNwX8NZEEeqiU8uzTY0Puw context-_RP7wgtZEEeqiU8uzTY0Puw context-_VBCl8MTqEeqlbN5fRfdrWQ context-_faMEFEybEeyns9TdzUL1Ow\" id=\"_nccmwMTpEeqlbN5fRfdrWQ\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"61\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"110\" x=\"1007.5\" y=\"54.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1007\" y=\"67.35714285714286\"><tspan x=\"1072.5\" xml:space=\"preserve\" y=\"74.07142857142857\">kill He Who</tspan><tspan x=\"1072.5\" xml:space=\"preserve\" y=\"85.5\">Must Not Be</tspan><tspan x=\"1072.5\" xml:space=\"preserve\" y=\"96.92857142857143\">Named</tspan></text><use height=\"20\" width=\"20\" x=\"1024.5\" xlink:href=\"#LogicalFunctionSymbol\" y=\"76.53896103896103\" /></g><g class=\"Box FIP context-_0nQlwMTqEeqlbN5fRfdrWQ context-_VBCl8MTqEeqlbN5fRfdrWQ context-_faMEFEybEeyns9TdzUL1Ow\" id=\"_8Fj_0MTpEeqlbN5fRfdrWQ\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1010.5 80.5)\" width=\"10\" x=\"1005.5\" xlink:href=\"#PortSymbol\" y=\"75.5\" /></g><g class=\"Box FIP context-_8FlN8cTpEeqlbN5fRfdrWQ context-_B7YjssTqEeqlbN5fRfdrWQ context-_RP7wgtZEEeqiU8uzTY0Puw\" id=\"_FNwX8NZEEeqiU8uzTY0Puw\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(0 1024.5 112.5)\" width=\"10\" x=\"1019.5\" xlink:href=\"#PortSymbol\" y=\"107.5\" /></g><g class=\"Box CP_INOUT context-_VBCl8MTqEeqlbN5fRfdrWQ context-_z-LwYMTmEeqlbN5fRfdrWQ\" id=\"_z5h54MTmEeqlbN5fRfdrWQ\"><rect class=\"CP_INOUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(90 970.5 40.5)\" width=\"10\" x=\"965.5\" y=\"35.5\" /></g><g class=\"Box CP_IN context-_RP7wgtZEEeqiU8uzTY0Puw context-_YwLxMMTqEeqlbN5fRfdrWQ\" id=\"_YwIt4MTqEeqlbN5fRfdrWQ\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(180 1152.5 153.5)\" width=\"10\" x=\"1147.5\" xlink:href=\"#ComponentPortSymbol\" y=\"148.5\" /></g><g class=\"Box CP_IN context-_faMEFEybEeyns9TdzUL1Ow\" id=\"_faBE40ybEeyns9TdzUL1Ow\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 970.5 30.5)\" width=\"10\" x=\"965.5\" xlink:href=\"#ComponentPortSymbol\" y=\"25.5\" /></g><g class=\"Box LogicalHumanActor context-_3KmdYLB_EeqLtsTDMgEHBw context-_3Ko5oLB_EeqLtsTDMgEHBw context-_RP8-gtZEEeqiU8uzTY0Puw context-_RP8XdNZEEeqiU8uzTY0Puw context-_YwGRoMTqEeqlbN5fRfdrWQ context-_YwLxMMTqEeqlbN5fRfdrWQ context-_b-Xr7EhSEeyVkeSUJyVgbw\" id=\"_zuBo0LB_EeqLtsTDMgEHBw\"><rect class=\"LogicalHumanActor\" fill=\"url(&quot;#CustomGradient_DAFDFF_C6E6FF&quot;)\" height=\"171\" stroke=\"#4A4A97\" stroke-width=\"1\" width=\"200\" x=\"967.5\" y=\"395.5\" /><text class=\"LogicalHumanActor\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"967\" y=\"395\"><tspan x=\"1077.5\" xml:space=\"preserve\" y=\"405.85714285714283\">R. Weasley</tspan></text><use height=\"20\" width=\"20\" x=\"1033.0\" xlink:href=\"#LogicalHumanActorSymbol\" y=\"395.85714285714283\" /></g><g class=\"Box LogicalFunction context-_8FiKoMTpEeqlbN5fRfdrWQ context-_8FlN8cTpEeqlbN5fRfdrWQ context-_RP8XdNZEEeqiU8uzTY0Puw\" id=\"_toddEMTpEeqlbN5fRfdrWQ\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"101\" x=\"1017.5\" y=\"434.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1017\" y=\"451.14285714285717\"><tspan x=\"1078.0\" xml:space=\"preserve\" y=\"460.0\">assist Harry</tspan></text><use height=\"20\" width=\"20\" x=\"1031.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"450.0\" /></g><g class=\"Box FOP context-_8FlN8cTpEeqlbN5fRfdrWQ context-_RP8XdNZEEeqiU8uzTY0Puw\" id=\"_8FiKoMTpEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1115.5 454.5)\" width=\"10\" x=\"1110.5\" xlink:href=\"#PortSymbol\" y=\"449.5\" /></g><g class=\"Box LogicalFunction context-_B7X8oMTqEeqlbN5fRfdrWQ context-_B7YjssTqEeqlbN5fRfdrWQ context-_RP8-gtZEEeqiU8uzTY0Puw context-_b-Xr7EhSEeyVkeSUJyVgbw context-_phubwMTqEeqlbN5fRfdrWQ context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_0dxIAMTpEeqlbN5fRfdrWQ\"><rect class=\"LogicalFunction\" fill=\"#C5FFA6\" height=\"50\" stroke=\"#095C2E\" stroke-width=\"1\" width=\"101\" x=\"1017.5\" y=\"494.5\" /><text class=\"LogicalFunction\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1017\" y=\"507.57142857142856\"><tspan x=\"1078.0\" xml:space=\"preserve\" y=\"514.2857142857142\">break school</tspan><tspan x=\"1078.0\" xml:space=\"preserve\" y=\"525.7142857142857\">rules</tspan></text><use height=\"20\" width=\"20\" x=\"1029.0\" xlink:href=\"#LogicalFunctionSymbol\" y=\"508.44155844155836\" /></g><g class=\"Box FOP context-_B7YjssTqEeqlbN5fRfdrWQ context-_RP8-gtZEEeqiU8uzTY0Puw\" id=\"_B7X8oMTqEeqlbN5fRfdrWQ\"><use class=\"FOP\" fill=\"#095C2E\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1115.5 504.5)\" width=\"10\" x=\"1110.5\" xlink:href=\"#PortSymbol\" y=\"499.5\" /></g><g class=\"Box FIP context-_b-Xr7EhSEeyVkeSUJyVgbw context-_phyGIMTqEeqlbN5fRfdrWQ\" id=\"_phubwMTqEeqlbN5fRfdrWQ\"><use class=\"FIP\" fill=\"#E08503\" height=\"10\" stroke=\"#000000\" stroke-width=\"0\" transform=\"rotate(90 1020.5 513.5)\" width=\"10\" x=\"1015.5\" xlink:href=\"#PortSymbol\" y=\"508.5\" /></g><g class=\"Box CP_IN context-_3Ko5oLB_EeqLtsTDMgEHBw context-_b-Xr7EhSEeyVkeSUJyVgbw\" id=\"_3KmdYLB_EeqLtsTDMgEHBw\"><use class=\"CP_IN\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(270 970.5 532.5)\" width=\"10\" x=\"965.5\" xlink:href=\"#ComponentPortSymbol\" y=\"527.5\" /></g><g class=\"Box CP_OUT context-_RP8-gtZEEeqiU8uzTY0Puw context-_RP8XdNZEEeqiU8uzTY0Puw context-_YwLxMMTqEeqlbN5fRfdrWQ\" id=\"_YwGRoMTqEeqlbN5fRfdrWQ\"><use class=\"CP_OUT\" fill=\"#FFFFFF\" height=\"10\" stroke=\"#000000\" stroke-width=\"1\" transform=\"rotate(-180 1154.5 398.5)\" width=\"10\" x=\"1149.5\" xlink:href=\"#ComponentPortSymbol\" y=\"393.5\" /></g><g class=\"Edge FunctionalExchange\" id=\"_PEmXoMEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 518.5 540.5 613.5 540.5 613.5 540.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"531.5\" y=\"522\"><tspan x=\"577.5\" xml:space=\"preserve\" y=\"532.8571428571429\">wizardry</tspan></text><use height=\"20\" width=\"20\" x=\"537.0\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"522.8571428571429\" /></g><g class=\"Edge FIPAllocation\" id=\"_twPK8MTnEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 363.5 130.5 375.5 130.5 375.5 540.5 383.5 540.5 383.5 540.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"375\" y=\"193\"><tspan x=\"375.0\" xml:space=\"preserve\" y=\"196.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_RmRSwMTrEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 138.5 370.5 375.5 370.5 375.5 540.5 383.5 540.5 383.5 540.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"285.5\" y=\"385\"><tspan x=\"337.5\" xml:space=\"preserve\" y=\"395.85714285714283\">Knowledge</tspan></text><use height=\"20\" width=\"20\" x=\"291.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"385.85714285714283\" /></g><g class=\"Edge FIPAllocation\" id=\"_E2dKmkhREeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 359.5 426.5 386.5 535.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"380\" y=\"474\"><tspan x=\"380.0\" xml:space=\"preserve\" y=\"477.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_0nQlwMTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 632.5 148.5 885.5 148.5 885.5 78.5 1005.5 78.5 1005.5 80.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"761.5\" y=\"132\"><tspan x=\"832.5\" xml:space=\"preserve\" y=\"140.71428571428572\">educate &amp; mature</tspan></text><use height=\"20\" width=\"20\" x=\"770.0\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"130.71428571428572\" /></g><g class=\"Edge FOPAllocation\" id=\"_HDIA8MTnEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 648.5 124.5 632.5 143.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"641\" y=\"128\"><tspan x=\"641.0\" xml:space=\"preserve\" y=\"131.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_IXbcMuQUEe2jpIKbeHI0hw\"><path class=\"Edge\" d=\"M 138.5 370.5 375.5 370.5 375.5 140.5 487.5 140.5 487.5 138.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"304.5\" y=\"246\"><tspan x=\"348.5\" xml:space=\"preserve\" y=\"254.71428571428572\">educate</tspan></text><use height=\"20\" width=\"20\" x=\"309.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"244.71428571428572\" /></g><g class=\"Edge FIPAllocation\" id=\"_IXg70OQUEe2jpIKbeHI0hw\"><path class=\"Edge\" d=\"M 363.5 129.5 487.5 138.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"426\" y=\"123\"><tspan x=\"426.0\" xml:space=\"preserve\" y=\"126.0\" /></text></g><g class=\"Edge ComponentExchange\" id=\"_z-LwYMTmEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 965.5 40.5 855.5 40.5 855.5 120.5 658.5 120.5 658.5 119.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"775.5\" y=\"95\"><tspan x=\"821.5\" xml:space=\"preserve\" y=\"105.85714285714286\">Learning</tspan></text><use height=\"20\" width=\"20\" x=\"781.0\" xlink:href=\"#ComponentExchangeSymbol\" y=\"95.85714285714286\" /></g><g class=\"Edge ComponentExchange\" id=\"_e8OmYKjsEeu7PunlgwoBGA\"><path class=\"Edge\" d=\"M 561.5 186.5 561.5 358.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"562.5\" y=\"266\"><tspan x=\"597.5\" xml:space=\"preserve\" y=\"274.7142857142857\">Care</tspan></text><use height=\"20\" width=\"20\" x=\"566.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"264.7142857142857\" /></g><g class=\"Edge FunctionalExchange\" id=\"_phyGIMTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 628.5 418.5 996.5 418.5 996.5 512.5 1015.5 512.5 1015.5 513.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"845.5\" y=\"422\"><tspan x=\"898.5\" xml:space=\"preserve\" y=\"432.85714285714283\">punish</tspan></text><use height=\"20\" width=\"20\" x=\"862.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"422.85714285714283\" /></g><g class=\"Edge FOPAllocation\" id=\"_b-Xr8UhSEeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 648.5 436.5 628.5 422.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"632\" y=\"437\"><tspan x=\"632.0\" xml:space=\"preserve\" y=\"440.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_faMrEkybEeyns9TdzUL1Ow\"><path class=\"Edge\" d=\"M 473.5 366.5 618.5 416.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"549\" y=\"382\"><tspan x=\"549.0\" xml:space=\"preserve\" y=\"385.0\" /></text></g><g class=\"Edge ComponentExchange\" id=\"_3Ko5oLB_EeqLtsTDMgEHBw\"><path class=\"Edge\" d=\"M 658.5 440.5 775.5 440.5 775.5 514.5 805.5 514.5 805.5 494.5 825.5 494.5 825.5 474.5 875.5 474.5 875.5 494.5 905.5 494.5 905.5 514.5 935.5 514.5 935.5 464.5 915.5 464.5 915.5 424.5 965.5 424.5 965.5 464.5 945.5 464.5 945.5 529.5 965.5 529.5 965.5 532.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"796.5\" y=\"444\"><tspan x=\"864.0\" xml:space=\"preserve\" y=\"452.7142857142857\">Punishment</tspan></text><use height=\"20\" width=\"20\" x=\"815.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"442.7142857142857\" /></g><g class=\"Edge ComponentExchange\" id=\"_WbdGoLB_EeqLtsTDMgEHBw\"><path class=\"Edge\" d=\"M 353.5 130.5 185.5 130.5 185.5 130.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"216.5\" y=\"110\"><tspan x=\"294.0\" xml:space=\"preserve\" y=\"120.85714285714286\">Headmaster</tspan><tspan x=\"294.0\" xml:space=\"preserve\" y=\"136.57142857142858\">Responsibilities</tspan></text><use height=\"20\" width=\"20\" x=\"237.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"115.57142857142857\" /></g><g class=\"Edge ComponentExchange\" id=\"_XNOh0LB_EeqLtsTDMgEHBw\"><path class=\"Edge\" d=\"M 185.5 422.5 353.5 422.5 353.5 421.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"185.5\" y=\"400\"><tspan x=\"263.0\" xml:space=\"preserve\" y=\"410.85714285714283\">Teacher...</tspan></text><use height=\"20\" width=\"20\" x=\"206.5\" xlink:href=\"#ComponentExchangeSymbol\" y=\"400.85714285714283\" /></g><g class=\"Edge FOPAllocation\" id=\"_syJloMEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 175.5 130.5 155.5 130.5 155.5 101.5 138.5 101.5 138.5 100.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"166\" y=\"141\"><tspan x=\"166.0\" xml:space=\"preserve\" y=\"144.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_u8br4MEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 175.5 130.5 155.5 130.5 155.5 161.5 138.5 161.5 138.5 160.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"157\" y=\"129\"><tspan x=\"157.0\" xml:space=\"preserve\" y=\"132.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_E2dxpUhREeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 175.5 422.5 155.5 422.5 155.5 371.5 138.5 371.5 138.5 370.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"155\" y=\"384\"><tspan x=\"155.0\" xml:space=\"preserve\" y=\"387.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_o4KcUMEDEeqW8_YksX3uDg\"><path class=\"Edge\" d=\"M 175.5 422.5 155.5 422.5 155.5 441.5 138.5 441.5 138.5 441.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"160\" y=\"420\"><tspan x=\"160.0\" xml:space=\"preserve\" y=\"423.0\" /></text></g><g class=\"Edge FIPAllocation\" id=\"_VBCl8MTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 975.5 40.5 987.5 40.5 987.5 80.5 1005.5 80.5 1005.5 80.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"995\" y=\"58\"><tspan x=\"995.0\" xml:space=\"preserve\" y=\"61.0\" /></text></g><g class=\"Edge FIPAllocation\" id=\"_faMEFEybEeyns9TdzUL1Ow\"><path class=\"Edge\" d=\"M 973.5 35.5 1006.5 75.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"997\" y=\"49\"><tspan x=\"997.0\" xml:space=\"preserve\" y=\"52.0\" /></text></g><g class=\"Edge FunctionalExchange\" id=\"_B7YjssTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 1120.5 504.5 1145.5 504.5 1145.5 214.5 1022.5 214.5 1022.5 117.5 1024.5 117.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1037.5\" y=\"192\"><tspan x=\"1087.0\" xml:space=\"preserve\" y=\"202.85714285714286\">friendship</tspan></text><use height=\"20\" width=\"20\" x=\"1043.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"192.85714285714286\" /></g><g class=\"Edge FunctionalExchange\" id=\"_8FlN8cTpEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 1120.5 454.5 1135.5 454.5 1135.5 265.5 1022.5 265.5 1022.5 117.5 1024.5 117.5\" fill=\"none\" stroke=\"#095C2E\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#095C2E\" text-anchor=\"middle\" x=\"1033.5\" y=\"247\"><tspan x=\"1083.5\" xml:space=\"preserve\" y=\"255.71428571428572\">assistance</tspan></text><use height=\"20\" width=\"20\" x=\"1039.5\" xlink:href=\"#FunctionalExchangeSymbol\" y=\"245.71428571428572\" /></g><g class=\"Edge FIPAllocation\" id=\"_RP7wgtZEEeqiU8uzTY0Puw\"><path class=\"Edge\" d=\"M 1152.5 148.5 1152.5 135.5 1022.5 135.5 1022.5 117.5 1024.5 117.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"1148\" y=\"137\"><tspan x=\"1148.0\" xml:space=\"preserve\" y=\"140.0\" /></text></g><g class=\"Edge ComponentExchange\" id=\"_YwLxMMTqEeqlbN5fRfdrWQ\"><path class=\"Edge\" d=\"M 1154.5 393.5 1154.5 158.5 1152.5 158.5\" fill=\"none\" stroke=\"#4A4A97\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" fill=\"#4A4A97\" text-anchor=\"middle\" x=\"1038.5\" y=\"161\"><tspan x=\"1111.5\" xml:space=\"preserve\" y=\"171.85714285714286\">Help for Harry</tspan></text><use height=\"20\" width=\"20\" x=\"1058.0\" xlink:href=\"#ComponentExchangeSymbol\" y=\"161.85714285714286\" /></g><g class=\"Edge FOPAllocation\" id=\"_RP8XdNZEEeqiU8uzTY0Puw\"><path class=\"Edge\" d=\"M 1154.5 403.5 1159.5 403.5 1159.5 454.5 1120.5 454.5 1120.5 454.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"1159\" y=\"433\"><tspan x=\"1159.0\" xml:space=\"preserve\" y=\"436.0\" /></text></g><g class=\"Edge FOPAllocation\" id=\"_RP8-gtZEEeqiU8uzTY0Puw\"><path class=\"Edge\" d=\"M 1154.5 403.5 1159.5 403.5 1159.5 504.5 1120.5 504.5 1120.5 504.5\" fill=\"none\" stroke=\"#095C2E\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"1156\" y=\"458\"><tspan x=\"1156.0\" xml:space=\"preserve\" y=\"461.0\" /></text></g><g class=\"Edge FIPAllocation\" id=\"_b-Xr7EhSEeyVkeSUJyVgbw\"><path class=\"Edge\" d=\"M 975.5 530.5 1015.5 517.5\" fill=\"none\" stroke=\"#E08503\" stroke-dasharray=\"5\" stroke-width=\"2\" /><text class=\"Annotation\" dominant-baseline=\"middle\" text-anchor=\"middle\" x=\"999\" y=\"515\"><tspan x=\"999.0\" xml:space=\"preserve\" y=\"518.0\" /></text></g></svg></td></tr>\n",
       "</table>\n",
       "\n",
       "</body>\n",
       "</html>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "fig_templ = \"\".join(\n",
    "    (\n",
    "        '{% extends \"template.html\" %}',\n",
    "        \"{% block content %}\",\n",
    "        templ,\n",
    "        \"{% endblock %}\",\n",
    "    )\n",
    ")\n",
    "final_templ = \"\"\"\n",
    "<!DOCTYPE html>\n",
    "<html>\n",
    "\n",
    "<head>\n",
    "    <style>\n",
    "        caption {\n",
    "            caption-side: bottom;\n",
    "            border-top: 1px solid silver;\n",
    "        }\n",
    "    </style>\n",
    "</head>\n",
    "\n",
    "<body>\n",
    "    {% block content %}\n",
    "    {% endblock %}\n",
    "</body>\n",
    "</html>\n",
    "\"\"\"\n",
    "\n",
    "env = jinja2.Environment(\n",
    "    loader=jinja2.DictLoader({\"template.html\": final_templ})\n",
    ")\n",
    "rendered = env.from_string(fig_templ).render(\n",
    "    component=model.search(\"LogicalComponent\").by_name(\"Hogwarts\"),\n",
    "    fig_id=1,\n",
    "    fig_caption=diagram.name,\n",
    "    figure=diagram,\n",
    ")\n",
    "HTML(rendered)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.5"
  },
  "vscode": {
   "interpreter": {
    "hash": "e7370f93d1d0cde622a1f8e1c04877d8463912d04d973331ad4851f04de6915a"
   }
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
